(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{242:function(t,s,a){t.exports=a.p+"assets/img/ts-without-type-inference.db814d5b.png"},243:function(t,s,a){t.exports=a.p+"assets/img/generator-any.5b5a4484.png"},244:function(t,s,a){t.exports=a.p+"assets/img/js-and-ts.db3288e5.png"},318:function(t,s,a){"use strict";a.r(s);var n=a(3),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("blockquote",[n("p",[t._v("2021.9.13 æ›´æ–°ï¼šå®Œæ•´çš„ç±»å‹ä»£ç å·²ä¸Šä¼  githubï¼Œè§"),n("a",{attrs:{href:"https://github.com/Moka-FE/dva-types",target:"_blank",rel:"noopener noreferrer"}},[t._v("è¿™é‡Œ"),n("OutboundLink")],1)])]),t._v(" "),n("p",[t._v("æœ€è¿‘ä¸€ç›´åœ¨æ£é¼“ä¸€ä¸ªäº‹æƒ…ï¼Œå°±æ˜¯å°†ä¸€ä¸ªåŸºäº Dva çš„ React é¡¹ç›®ä» js è¿ç§»åˆ° tsï¼Œè¸©äº†å¾ˆå¤šå‘ï¼Œå†³å®šåˆ†äº«ä¸€ä¸‹ã€‚")]),t._v(" "),n("h2",{attrs:{id:"å‰ç½®åŠ¨ä½œ"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#å‰ç½®åŠ¨ä½œ"}},[t._v("#")]),t._v(" å‰ç½®åŠ¨ä½œ")]),t._v(" "),n("blockquote",[n("p",[t._v("é—®ï¼šæŠŠå¤§è±¡è£…è¿›å†°ç®±åˆ†å‡ æ­¥ï¼Ÿ")])]),t._v(" "),n("p",[t._v("æœ€ç›´è§‚çš„æƒ³æ³•æ˜¯â€œæ¸è¿›å¼è¿ç§»â€ï¼Œå³ï¼šæ–°ä»£ç å°½é‡ç”¨ ts å†™ï¼Œè€ä»£ç æ…¢æ…¢é‡æ„æˆ tsã€‚è¿™ä¹Ÿæ˜¯å¾ˆå¤šå¤§è§„æ¨¡é‡æ„é¦–é€‰çš„ç­–ç•¥ï¼Œæ¯”å¦‚å›½é™…åŒ–ã€‚ä½†åœ¨å®é™…æ‰§è¡Œçš„æ—¶å€™ä½ ä¼šå‘ç°ä¸€ä¸ªå¤§é—®é¢˜ï¼Œç±»å‹æ¨å¯¼ç‰¹åˆ«éº»çƒ¦ã€‚ç±»å‹æ¨å¯¼ï¼Œç±»å‹æ¨å¯¼ï¼Œå®ƒæ˜¯åŸºäºå·²æœ‰çš„ç±»å‹æ¨å¯¼ï¼Œå¦‚æœæ²¡æœ‰ç±»å‹é‚£æ˜¯æ¨ä¸å‡ºæ¥çš„ã€‚è€Œé¡¹ç›®è¿ç§»åˆšå¼€å§‹çš„æ—¶å€™è¿™éƒ¨åˆ†æ°æ°æ˜¯ç¼ºå¤±çš„ï¼ˆæ¯”å¦‚ API è¿”å›çš„æ•°æ®ç±»å‹ã€redux å…¨å±€çŠ¶æ€ä¸­çš„ç±»å‹ï¼‰ï¼Œå·§å¦‡éš¾ä¸ºæ— ç±³ä¹‹ç‚Šã€‚æ²¡æœ‰å……åˆ†åˆ©ç”¨ç±»å‹æ¨å¯¼èƒ½åŠ›çš„ ts ä»£ç ï¼Œå°±å¥½åƒè¿™æ ·ï¼š")]),t._v(" "),n("p",[n("img",{attrs:{src:a(242),alt:"ts withou type inference"}})]),t._v(" "),n("p",[t._v("å› æ­¤ï¼Œè¿ç§»å¤§é¡¹ç›®åˆ° tsï¼Œé¦–å…ˆè¦åšçš„ç¬¬ä¸€æ­¥åº”è¯¥æ˜¯"),n("strong",[t._v("æ‰‹åŠ¨è¡¥å…¨å…³é”®ç±»å‹å®šä¹‰")]),t._v("ï¼Œè¿™ä¸€æ­¥å®Œæˆäº†ï¼Œæ‰å¯ä»¥è¿›è¡Œåç»­çš„è¿ç§»åŠ¨ä½œã€‚")]),t._v(" "),n("p",[t._v("é‚£ä¹ˆä»€ä¹ˆæ ·çš„ç±»å‹éœ€è¦è¡¥å…¨å‘¢ï¼Ÿ")]),t._v(" "),n("p",[t._v("å…¶å®è¿™ä¸ªé—®é¢˜çš„ç­”æ¡ˆä¹Ÿä¸éš¾æƒ³åˆ°ï¼Œæœ‰äº›ç±»å‹æ˜¯å¯ä»¥é€šè¿‡ç±»å‹æ¨å¯¼å¾—åˆ°çš„ï¼Œé‚£ä¹ˆè¿™æ ·çš„ç±»å‹å°±ä¸å¿…æ‰‹åŠ¨è¡¥å…¨ï¼Œè€Œæœ‰äº›ç±»å‹æ— æ³•é€šè¿‡ç±»å‹æ¨å¯¼å¾—åˆ°ï¼Œè¿™äº›ç±»å‹å°±æ˜¯æˆ‘ä»¬éœ€è¦æ‰‹åŠ¨è¡¥å…¨çš„ç±»å‹ã€‚ä»€ä¹ˆæ ·çš„ç±»å‹æ˜¯æ— æ³•é€šè¿‡æ¨å¯¼å¾—åˆ°çš„å‘¢ï¼Ÿä¸€è·¯é¡ºè—¤æ‘¸ç“œå‘æºå¤´æ‰¾ï¼Œé€šå¸¸ä½ ä¼šå‘ç°è¿™äº›ä¸œè¥¿æ¥è‡ªå¤–éƒ¨ APIï¼Œç„¶åä»¥å…¨å±€çŠ¶æ€çš„å½¢å¼ç•™åœ¨äº† redux è¿™æ ·çš„åœ°æ–¹è¢«å„å¤„å¼•ç”¨ã€‚")]),t._v(" "),n("p",[t._v("ç­”æ¡ˆå‘¼ä¹‹æ¬²å‡ºäº†ï¼Œè¿ç§»è€é¡¹ç›®ï¼Œåº”è¯¥å…ˆä»è¿ç§»å…¨å±€çŠ¶æ€å¼€å§‹ã€‚å½“ä½ æŠŠå…¨å±€çŠ¶æ€çš„ç±»å‹å®šä¹‰éƒ½è¡¥å……å¾—å·®ä¸å¤šçš„æ—¶å€™ï¼Œæ­¤æ—¶å°±å¯ä»¥å¼€å§‹æ­£å¼çš„ ts è¿ç§»äº†ã€‚")]),t._v(" "),n("p",[t._v("é‚£ä¹ˆæ¥ä¸‹æ¥å°±æ¥èŠèŠ Dva è¿ç§»åˆ° ts çš„ä¸€äº›å‘ã€‚")]),t._v(" "),n("h2",{attrs:{id:"æ‘¸ç€è‡ªå·±è¿‡æ²³"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#æ‘¸ç€è‡ªå·±è¿‡æ²³"}},[t._v("#")]),t._v(" æ‘¸ç€è‡ªå·±è¿‡æ²³")]),t._v(" "),n("p",[t._v("react-redux å®˜æ–¹æ–‡æ¡£ä¸­æœ‰ä¸€ç¯‡"),n("a",{attrs:{href:"https://react-redux.js.org/using-react-redux/usage-with-typescript",target:"_blank",rel:"noopener noreferrer"}},[t._v("Usage with TypeScript"),n("OutboundLink")],1),t._v("æåˆ°äº† react-redux çš„ ts ç”¨æ³•ï¼Œå¦‚æœä½ åªç”¨åˆ°äº† react-reduxï¼Œé‚£ä¹ˆå‚è€ƒè¿™ä¸€ç¯‡å°±åŸºæœ¬è¶³å¤Ÿäº†ï¼ŒåŸºæœ¬ä¸ä¼šé‡åˆ°å¤§é—®é¢˜ã€‚")]),t._v(" "),n("p",[t._v("å¦‚æœä½ çš„é¡¹ç›®ä½¿ç”¨äº† redux-sagaï¼Œé‚£ä¹ˆå¾ˆä¸å¹¸ï¼Œå¯¹ generator çš„å¤„ç†ä¼šéå¸¸è›‹ç–¼ï¼Œredux-saga å®˜æ–¹ä¹Ÿæ²¡æœ‰ç»™å‡ºæ¨èçš„åšæ³•ï¼Œä½ åªèƒ½ä¾èµ–äºç¤¾åŒºç»éªŒï¼Œæ¯”å¦‚è¿™ä¸€ç¯‡"),n("a",{attrs:{href:"https://tech.lalilo.com/redux-saga-and-typescript-doing-it-right",target:"_blank",rel:"noopener noreferrer"}},[t._v("Redux-saga and Typescript, doing it right"),n("OutboundLink")],1),t._v("ï¼Œè¿˜æœ‰è¿™ä¸€ç¯‡"),n("a",{attrs:{href:"https://enetoolveda.medium.com/how-to-use-redux-saga-typescript-like-a-pro-523b97143303",target:"_blank",rel:"noopener noreferrer"}},[t._v("How To Use Redux Saga/Typescript Like a pro!"),n("OutboundLink")],1),t._v("ã€‚æ€»çš„æ¥è¯´ï¼Œå†™èµ·æ¥ä¼šæ¯”è¾ƒè›‹ç–¼ï¼Œå‹‰å¼ºå¯ä»¥æ¥å—ã€‚")]),t._v(" "),n("p",[t._v("è€Œå¦‚æœä½ çš„é¡¹ç›®ä½¿ç”¨äº† Dvaï¼Œé™¤äº†ä¸Šé¢æåˆ°çš„ redux-saga çš„é—®é¢˜ä¹‹å¤–ï¼Œä½ è¿˜å°†é‡åˆ° Dva ç‰¹æœ‰çš„ä¸€å †é—®é¢˜ã€‚Dva å®˜ç½‘è‡³ä»Šéƒ½æ²¡æœ‰ç»™å‡º ts çš„æŒ‡å—ï¼ˆå®é™…ä¸Šæ˜¯ç»™ä¸å‡ºï¼Œåé¢ä¼šåˆ†æï¼‰ï¼ŒUmi å®˜ç½‘å€’æ˜¯ç»™äº†ä¸€ä¸ªå°ä¾‹å­ï¼Œä½†é‚£ä¸ªä¾‹å­å¯ä»¥è¯´æ˜¯â€œæ¯«æ— è¯šæ„â€ï¼ŒåŸºæœ¬ä¸Šå°±æ˜¯æ‰‹åŠ¨æ·»åŠ äº†å„ç§ç±»å‹è®© ts ç¼–è¯‘ä¸æŠ¥é”™è€Œå·²ï¼Œå‡ ä¹æ²¡æœ‰ä»»ä½•å‚è€ƒä»·å€¼ã€‚ä¸ä»…å®˜ç½‘ä¸ç»™åŠ›ï¼Œdva ç¤¾åŒºä¹ŸåŒæ ·ä¸ç»™åŠ›ï¼ŒåŸºæœ¬ä¸Šæ‰¾ä¸åˆ°æœ‰ç”¨çš„ç¤¾åŒºå®è·µç»éªŒï¼Œå³ä¾¿æ‰¾åˆ°äº†ï¼Œé€šå¸¸éƒ½æ˜¯ç©å…·çº§åˆ«çš„ demoï¼Œç³Šå¼„å°å­©å‘¢ã€‚")]),t._v(" "),n("p",[t._v("æ²¡åŠæ³•ï¼Œé‚£å°±åªèƒ½è‡ªå·±æ‘¸ç´¢äº†ï¼Œæ‘¸ç€è‡ªå·±è¿‡æ²³å§ã€‚")]),t._v(" "),n("h2",{attrs:{id:"ç¤¾åŒºçš„è§£å†³æ–¹æ¡ˆ"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ç¤¾åŒºçš„è§£å†³æ–¹æ¡ˆ"}},[t._v("#")]),t._v(" ç¤¾åŒºçš„è§£å†³æ–¹æ¡ˆ")]),t._v(" "),n("p",[t._v("ç»™ Dva è¡¥å…¨ç±»å‹ï¼Œæœ¬è´¨ä¸Šå°±æ˜¯ç»™ model æ·»åŠ ç±»å‹ï¼Œè¯¥æ€ä¹ˆåšå‘¢ï¼Ÿæˆ‘ä»¬å…ˆçœ‹çœ‹ç¤¾åŒºçš„è§£å†³åŠæ³•ã€‚")]),t._v(" "),n("p",[t._v("ç¬¬ä¸€ç§åŠæ³•ï¼Œåˆ©ç”¨ dva å†…ç½®çš„ä¸€äº›é€šç”¨ç±»å‹ï¼š")]),t._v(" "),n("div",{staticClass:"language-ts extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ts"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" EffectsCommandMap"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Model "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'dva'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" AnyAction"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Reducer "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'redux'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("type")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Effect")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  action"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" AnyAction"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  effects"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" EffectsCommandMap "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" select"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("T")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("func")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("state"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" StateType"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("T")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("T")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("type")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("State")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  value"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("number")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("interface")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TestModel")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  namespace"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'test'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  state"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" State"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  reducers"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// reducersé‡Œå‡ ä¹æ²¡æœ‰ç±»å‹é™å®š")]),t._v("\n    foo"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Reducer"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("State"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  effects"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// effectsé‡Œå‡ ä¹æ²¡æœ‰ç±»å‹é™å®š")]),t._v("\n    bar"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Effect"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æœ€åæ˜¯å…·ä½“modelå®ç°")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" testModel"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" TestModel "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("è¿™ç§å†™æ³•çš„ç±»å‹é™å®šå¤ªå®½æ¾äº†ï¼Œå¯¹ reducer å’Œ effect å‡½æ•°å‡ ä¹å°±æ²¡æœ‰é™åˆ¶ï¼Œé™¤äº†è®© ts ç±»å‹æ£€æŸ¥ä¸æŠ¥é”™ä»¥å¤–å®ç”¨ä»·å€¼å¾ˆä½ï¼Œè·Ÿç›´æ¥ç”¨ javascript å†™æ²¡ä»€ä¹ˆåŒºåˆ«ï¼Œå±äºè‡ªæ¬ºæ¬ºäººå¼çš„å†™æ³•ã€‚")]),t._v(" "),n("p",[t._v("è¿˜æœ‰ä¸€ç§ç¤¾åŒºæ–¹æ¡ˆæ˜¯è¿™æ ·ï¼Œç®€å•æ¥è¯´å°±æ˜¯åœ¨ç¬¬ä¸€ç§çš„åŸºç¡€ä¸ŠæŠŠ reducer å’Œ effect å‡½æ•°çš„ç±»å‹å†™å¾—æ›´è¯¦ç»†äº†ï¼š")]),t._v(" "),n("div",{staticClass:"language-ts extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ts"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("type")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TestState")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  value"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("number")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("type")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TestModel")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  namespace"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'test'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  state"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" TestState"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  reducers"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// reducersé‡Œçš„å‡½æ•°èµ·ç æœ‰äº†å‚æ•°å’Œè¿”å›å€¼çš„é™å®š")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("foo")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("state"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" TestState"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" action"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" payload"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("number")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" TestState"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  effects"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// effectsé‡Œçš„å‡½æ•°èµ·ç æœ‰äº†å‚æ•°å’Œè¿”å›å€¼çš„é™å®š")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("bar")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("action"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" payload"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æœ€åæ˜¯å…·ä½“modelå®ç°")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" model"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" TestModel "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("è¿™ç§å†™æ³•ï¼Œreducer å’Œ effect å‡½æ•°å†…éƒ¨è‡³å°‘èƒ½åšä¸€äº›ç±»å‹æ£€æŸ¥äº†ï¼Œä½†ä¹Ÿå°±ä»…æ­¤è€Œå·²äº†ï¼Œåœ¨è§¦å‘ reducer å’Œ effect çš„åœ°æ–¹ä»ç„¶æ˜¯æ²¡æœ‰ç±»å‹æ£€æŸ¥çš„ï¼Œä¸‹é¢è¿™ç§é”™è¯¯æ˜¯æ— æ³•æ£€æŸ¥å‘ç°çš„ï¼Œæ¯”å¦‚ï¼š")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[t._v("put")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("type")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'tset'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// testæ‹¼å†™é”™è¯¯")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("payload")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("put")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("type")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'test'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å¿˜è®°å†™payload")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("h2",{attrs:{id:"çº¦å®šå¼ä¹‹æ®‡"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#çº¦å®šå¼ä¹‹æ®‡"}},[t._v("#")]),t._v(" çº¦å®šå¼ä¹‹æ®‡")]),t._v(" "),n("p",[t._v("ä»”ç»†æƒ³æƒ³ï¼Œreducer æˆ– effect éƒ½æ˜¯é€šè¿‡ dispatch action è§¦å‘çš„ï¼Œå› è€Œå¯¼è‡´ä¸Šè¿°é—®é¢˜çš„æ ¹æœ¬åŸå› åœ¨äºæˆ‘ä»¬è¿˜ç¼ºå¤±äº† action çš„ç±»å‹ã€‚å¦‚ä½•å¾—åˆ° action çš„ç±»å‹å‘¢ï¼Ÿç­‰ç­‰ï¼æˆ‘ä»¬åœ¨ Dva é‡Œä¼¼ä¹ä»æ¥æ²¡æœ‰å®šä¹‰è¿‡ action å‘€ï¼æ¯”å¦‚ä¸‹é¢æ˜¯ä¸€ä¸ªéå¸¸å…¸å‹çš„ dva modelï¼Œé‡Œé¢çš„ action åªåœ¨ reducer å’Œ effect å‡½æ•°ä¸­ä½œä¸ºå‚æ•°å‡ºç°ï¼Œaction æ˜¯ä»€ä¹ˆå‹æ ¹å°±æ²¡æœ‰å®šä¹‰è¿‡ã€‚")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("namespace")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'test'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("state")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("value")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("reducers")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("foo")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("state"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" action")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("effects")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("bar")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("action")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("p",[t._v("å…¶å® action å¹¶ä¸æ˜¯æ²¡æœ‰å®šä¹‰ï¼Œåªæ˜¯è¿™ä¸ªå®šä¹‰ action çš„è¿‡ç¨‹è¢« Dva ç»™å°è£…èµ·æ¥äº†ï¼Œå®ƒä¼šåœ¨è¿è¡Œæ—¶å¯¹ model ç±»å‹åšå¤„ç†ï¼ŒåŠ¨æ€ç”Ÿæˆ action çš„å®šä¹‰ï¼Œè¿™æ˜¯ä¸€ä¸ªçº¦å®šçš„è¡Œä¸ºã€‚è¿™ç§å†™æ³•ä¹Ÿå°±æ˜¯å¸¸è¯´çš„çº¦å®šå¼ç¼–ç¨‹ã€‚")]),t._v(" "),n("p",[t._v("çº¦å®šå¼ç¼–ç¨‹æœ€å¤§å¥½å¤„å°±æ˜¯å†™èµ·æ¥çœäº‹å„¿ï¼Œå¯ä»¥çœç•¥å¾ˆå¤šæ ·æ¿ä»£ç ï¼Œè®©å¼€å‘è€…æŠŠç²¾åŠ›æ”¾åœ¨é‡è¦çš„äº‹æƒ…ä¸Šé¢ï¼Œå¼€å‘è€…ä¹Ÿå¾ˆå–œæ¬¢è¿™ç§åšæ³•ï¼ˆæ¯•ç«Ÿæ‡’æ˜¯å¤©æ€§ï¼‰ã€‚ä½†çº¦å®šå¼ç¼–ç¨‹ä¹Ÿæœ‰å¾ˆå¤šç¼ºç‚¹ï¼Œå…¶ä¸­æœ€å¤§çš„ç¼ºç‚¹åœ¨äº"),n("strong",[t._v("çº¦å®šå¼å†™æ³•æ— æ³•è·å¾—å®Œæ•´çš„é™æ€æ£€æŸ¥")]),t._v("ï¼Œè¿™æ˜¯å› ä¸ºâ€œçº¦å®šçš„ä¸œè¥¿â€æ˜¯è¿è¡Œæ—¶ç”Ÿæ•ˆçš„ï¼Œè€Œé™æ€æ£€æŸ¥å‘ç”Ÿåœ¨ç¼–è¯‘æ—¶ï¼Œå›ç”Ÿæˆ‘æœªç”Ÿï¼Œæˆ‘ç”Ÿå›å·²è€ã€‚")]),t._v(" "),n("p",[t._v("åœ¨ javascript æ—¶ä»£ï¼Œè¿™ä¸ªç¼ºç‚¹è¿˜å¥½ï¼Œå› ä¸º js ä»£ç æ€»æ˜¯å……æ»¡å„ç§è¿è¡Œæ—¶çš„ hackï¼Œä½†æ˜¯åˆ°äº† typescript æ—¶ä»£ï¼Œè¿™ä¸ªç¼ºç‚¹å°±å¾ˆä¸¥é‡äº†ã€‚å› ä¸º ts çš„æ ¸å¿ƒä»·å€¼â€œé™æ€ç±»å‹æ£€æŸ¥â€å®ƒæ˜¯é™æ€æ£€æŸ¥ï¼Œå‰é¢è¯´è¿‡äº†ï¼Œçº¦å®šå¼äº«å—ä¸åˆ°é™æ€ç±»å‹æ£€æŸ¥çš„ç¦åˆ©ï¼Œè€Œ ts ç¼–è¯‘å™¨åˆæ— æ³•ç†è§£çº¦å®šå†™æ³•çš„å«ä¹‰ï¼Œç»“æœå°±æ˜¯è¿™äº›çº¦å®šå¼å†™æ³•åœ¨ ts ç¼–è¯‘å™¨çœ¼ä¸­å¤§æ¦‚ç‡ä¼šå˜æˆå„ç§ç¼–è¯‘é”™è¯¯ ğŸ˜‚")]),t._v(" "),n("p",[t._v("åœ¨ typescript æ—¶ä»£ï¼Œçº¦å®šå¼çš„å†™æ³•è¶Šå¤šï¼Œè¶Šè›‹ç–¼ï¼Œè¿™å°±æ˜¯æ‰€è°“çš„çº¦å®šå¼ä¹‹æ®‡ã€‚")]),t._v(" "),n("p",[t._v("Dva ä¼šå¾ˆè´´å¿ƒåœ°æ ¹æ® model ä¸­çš„ reducers å’Œ effects è‡ªåŠ¨ç”Ÿæˆ actionã€‚æ¯”å¦‚è¿˜æ˜¯ä¹‹å‰çš„ä¾‹å­ï¼š")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" model "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("namespace")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'test'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("reducers")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("foo")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("state"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" action")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("effects")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("bar")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("action")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("Dva ä¼šåœ¨è¿è¡Œæ—¶è‡ªåŠ¨ç”Ÿæˆ"),n("code",[t._v("test/foo")]),t._v("å’Œ"),n("code",[t._v("test/bar")]),t._v("è¿™ä¸¤ä¸ª action keyã€‚ï¼ˆç”šè‡³ä¸ºäº†æ–¹ä¾¿å¼€å‘è€…ï¼Œåœ¨å½“å‰ model å†…éƒ¨å¯ä»¥çœç•¥ namespaceï¼‰")]),t._v(" "),n("p",[t._v("é™¤äº† action å¤–ï¼ŒDva è¿˜ä¼šå¸®ä½ æŠŠæ‰€æœ‰ models ç›®å½•ä¸‹çš„ model æ–‡ä»¶åˆå¹¶åˆ°ä¸€èµ·ï¼Œç»„æˆä¸€ä¸ª global stateï¼ˆåœ¨ react-redux ä¸­ï¼Œå¼€å‘è€…å¿…é¡»è‡ªå·±å†™ä¸€ä¸ª combine è¿‡ç¨‹ï¼‰ã€‚è¿™ä¹Ÿæ˜¯ä¸€ä¸ªçº¦å®šå¼çš„å†™æ³•ï¼Œæ‰€ä»¥åœ¨ Dva ä¸­ï¼Œå®Œæ•´çš„ state ç±»å‹ä¹Ÿæ˜¯å¾ˆéš¾å¾—åˆ°çš„ã€‚å½“ç„¶è¿™æ˜¯åè¯äº†ï¼Œåæ–‡ä¼šå†æ¬¡æåˆ°è¿™ä¸ªç¼ºé™·å¯¼è‡´çš„ä¸€äº›å½±å“ã€‚")]),t._v(" "),n("h2",{attrs:{id:"å¦‚ä½•æ­£ç¡®å¾—åˆ°-action-ç±»å‹"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#å¦‚ä½•æ­£ç¡®å¾—åˆ°-action-ç±»å‹"}},[t._v("#")]),t._v(" å¦‚ä½•æ­£ç¡®å¾—åˆ° action ç±»å‹")]),t._v(" "),n("p",[t._v("è™½ç„¶ Dva çš„ action æ˜¯çº¦å®šç”Ÿæˆçš„ï¼Œä½†è¿™å¹¶ä¸å¦¨ç¢æˆ‘ä»¬è¡¥å…¨ç±»å‹ï¼Œæœ€ç®€å•ç²—æš´åœ°ï¼Œä½ å¯ä»¥ç›´æ¥æ‰‹æ’• action ç±»å‹ï¼Œæ¯”å¦‚è¿™æ ·ï¼š")]),t._v(" "),n("div",{staticClass:"language-ts extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ts"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("type")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TestAction")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  type"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'test/foo'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  payload"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("number")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  type"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'test/bar'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  payload"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("p",[t._v("åƒä¸‡åˆ«è¿™ä¹ˆå¹²ï¼Œå¤ªå‚»äº†ã€‚")]),t._v(" "),n("p",[t._v("æˆ‘ä»¬æƒ³è¦çš„æ˜¯æ›´èªæ˜çš„ç”Ÿæˆ action ç±»å‹çš„åŠæ³•ï¼Œæ¯”å¦‚å¯ä»¥ç¼–å†™ä¸€ä¸ªå·¥å…·ç±»å‹ï¼Œåƒæ˜¯è¿™æ ·ï¼š")]),t._v(" "),n("div",{staticClass:"language-ts extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ts"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n * N: namespace\n * S: state\n * R: reducers\n * E: effects\n */")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("type")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("GenerateAction"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("M")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" namespace"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("N")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" state"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("S")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" reducers"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("R")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" effects"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("E")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("k "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("keyof")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("R")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    type"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token template-string"}},[n("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),n("span",{pre:!0,attrs:{class:"token interpolation"}},[n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("N")]),n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token interpolation"}},[n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("k"),n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),n("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ‹¼æ¥namespaceå’Œkey")]),t._v("\n    payload"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" SecondParams"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("R")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("k"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å–reducerå‡½æ•°çš„ç¬¬äºŒä¸ªå‚æ•°ä¸ºpayloadç±»å‹")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("keyof")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("R")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("k "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("keyof")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("E")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    type"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token template-string"}},[n("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),n("span",{pre:!0,attrs:{class:"token interpolation"}},[n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("N")]),n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token interpolation"}},[n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("k"),n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),n("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ‹¼æ¥namespaceå’Œkey")]),t._v("\n    payload"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" FirstParam"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("E")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("k"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å–effectå‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºpayloadç±»å‹")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("keyof")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("E")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ„é€ å¾—åˆ°TestActionç±»å‹")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("type")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TestAction")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" GenerateAction"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("TestModel"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("p",[t._v("å½“ç„¶å®é™…çš„ä»£ç è¦æ¯”è¿™ä¸ªå¤æ‚ä¸€äº›ï¼Œå› ä¸ºéœ€è¦å¢åŠ ä¸€äº›æ³›å‹é™å®šï¼Œæ­¤å¤–è¿˜è¦è€ƒè™‘æŸäº›æ²¡æœ‰ payload çš„ action ç±»å‹ï¼ˆè¿‡æ»¤æ‰ payload å±æ€§ï¼‰ã€‚")]),t._v(" "),n("p",[t._v("æœ‰äº† action ç±»å‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥å¹²å¾ˆå¤šäº‹æƒ…äº†ã€‚æ¯”å¦‚ç»™ effect çš„ commandï¼ˆæ¯”å¦‚ putï¼‰å¢åŠ ç±»å‹é™å®šï¼š")]),t._v(" "),n("div",{staticClass:"language-ts extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ts"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("type")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Commands"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Action"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("put")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("action"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Action"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æˆ‘ä»¬ç»™TestModelç±»å‹çš„effectå‡½æ•°å¢åŠ äº†æ–°çš„ç±»å‹çº¦æŸ")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("type")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TestModel")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n  effects"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è¿™é‡Œå¯¹barçš„ç¬¬äºŒä¸ªå‚æ•°commandsåšäº†ç±»å‹é™å®š")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("bar")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("action"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" TestAction"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" commands"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Commands"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("TestAction"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("è¿™æ ·åœ¨å…·ä½“ä½¿ç”¨çš„æ—¶å€™å°±å¯ä»¥æ£€æŸ¥å‡ºå‰æ–‡æ‰€è¯´çš„é”™è¯¯äº†ï¼š")]),t._v(" "),n("div",{staticClass:"language-ts extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ts"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" testModel"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" TestModel "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n  effects"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("bar")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("action"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" put "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è¿™é‡Œä¼šæŠ¥ç±»å‹é”™è¯¯ï¼Œå› ä¸ºtestæ‹¼å†™é”™äº†")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("yield")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("put")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" type"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'tset'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" payload"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è¿™é‡Œä¼šæŠ¥ç±»å‹é”™è¯¯ï¼Œå› ä¸ºpayloadæ²¡å†™")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("yield")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("put")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" type"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'test'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("å¦‚æœæ˜¯åœ¨ model å¤–éƒ¨è§¦å‘ actionï¼Œåˆ™å¯ä»¥è¿™æ ·å†™ï¼Œä¹Ÿå¯ä»¥è¾¾åˆ°ä¸€æ ·çš„æ•ˆæœï¼š")]),t._v(" "),n("div",{staticClass:"language-ts extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ts"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// dispatchæœ¬èº«æ”¯æŒä¸€ä¸ªæ³›å‹å‚æ•°")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token generic-function"}},[n("span",{pre:!0,attrs:{class:"token function"}},[t._v("dispatch")]),n("span",{pre:!0,attrs:{class:"token generic class-name"}},[n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("TestAction"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")])])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" type"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'test'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" payload"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("p",[t._v("ä¸ä»…æ˜¯æŠ¥é”™æ£€æŸ¥ï¼Œåœ¨è¾“å…¥ type çš„æ—¶å€™ï¼ŒIDE è¿˜èƒ½è‡ªåŠ¨æç¤ºå’Œè¡¥å…¨ï¼Œç®€ç›´ä¸è¦å¤ªçˆ½ã€‚")]),t._v(" "),n("h2",{attrs:{id:"generator-çš„é—®é¢˜"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#generator-çš„é—®é¢˜"}},[t._v("#")]),t._v(" generator çš„é—®é¢˜")]),t._v(" "),n("p",[t._v("Dva æ˜¯åŸºäº redux-saga å°è£…çš„ï¼Œeffect çš„å†™æ³•æ˜¯ generatorï¼Œè¿™ä¼šå¯¼è‡´ä¸€ä¸ªå°é—®é¢˜ã€‚æ¯”å¦‚æˆ‘ä»¬æœ‰è¿™æ ·ä¸€ä¸ª generatorï¼š")]),t._v(" "),n("div",{staticClass:"language-ts extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ts"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("bar")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" result "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("yield")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("call")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fetchSomething"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" result"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("å‡è®¾æˆ‘ä»¬å·²ç»ç»™å‡ºäº† call å’Œ fetchSomething çš„ç±»å‹ï¼Œts èƒ½æ¨å¯¼å‡º"),n("code",[t._v("result")]),t._v("çš„ç±»å‹å—ï¼Ÿç­”æ¡ˆæ˜¯ä¸èƒ½ï¼Œå®ƒçš„ç±»å‹ä¼šè¢«æ¨å¯¼æˆ anyã€‚è¿™æ˜¯ç”±äº generator çš„ç”¨æ³•å†³å®šçš„ï¼Œyield è¿”å›çš„ç±»å‹è·Ÿ call å’Œ fetchSomething æ²¡æœ‰å…³ç³»ï¼Œyield è¿”å›çš„ç±»å‹æ˜¯å¤–éƒ¨è°ƒç”¨ bar.next æ—¶ä¼ å…¥çš„ç±»å‹ï¼Œæ¯”å¦‚ï¼š")]),t._v(" "),n("div",{staticClass:"language-ts extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ts"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" b "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("bar")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("next")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä¼ å…¥çš„è¿™ä¸ª1æ‰æ˜¯resultçš„å€¼")]),t._v("\n")])])]),n("p",[t._v("ä½ å¯ä»¥å›é¡¾ä¸€ä¸‹ yield çš„"),n("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/yield",target:"_blank",rel:"noopener noreferrer"}},[t._v("ç”¨æ³•"),n("OutboundLink")],1),t._v("ã€‚")]),t._v(" "),n("p",[t._v("ä¹Ÿå°±æ˜¯è¯´ï¼Œts æ— æ³•è‡ªåŠ¨æ¨å¯¼å‡º generator çš„ yield ç±»å‹ï¼Œå› è€Œ"),n("strong",[t._v("ç±»å‹æ¨å¯¼åœ¨ generator çš„ yield å¤„ä¼šæ–­å¼€")]),t._v("ã€‚")]),t._v(" "),n("p",[t._v("ä¸Šé¢çš„ä¾‹å­åœ¨å®é™…ç¼–ç ä¸­éå¸¸å¸¸è§ï¼Œä» 2017 å¹´å¼€å§‹å°±æœ‰äººåœ¨ redux-saga çš„ github ä»“åº“ä¸­æå‡ºå¯¹åº”çš„ issueï¼Œå¸Œæœ› saga å®˜æ–¹èƒ½å¤Ÿæ”¹è¿›è¿™ä¸ªé—®é¢˜ï¼Œè§"),n("a",{attrs:{href:"https://github.com/redux-saga/redux-saga/issues/884",target:"_blank",rel:"noopener noreferrer"}},[t._v("è¿™é‡Œ"),n("OutboundLink")],1),t._v("ã€‚ä¸è¿‡å¦‚å‰æ–‡æ‰€è¯´ï¼Œå—é™äº generator æœ¬èº«çš„è°ƒç”¨æ–¹å¼ï¼Œæ”¹è¿›çš„ç†è®ºå¯èƒ½æ€§æ˜¯ 0ï¼Œä¹Ÿå°±æ˜¯åªèƒ½è¿™æ ·äº†ã€‚")]),t._v(" "),n("p",[n("img",{attrs:{src:a(243),alt:"still infer any"}})]),t._v(" "),n("p",[t._v("æœ‰ä¸€äº›æ°‘é—´è§£å†³åŠæ³•ï¼Œæ¯”å¦‚ä¸Šå›¾ä¸­æåˆ°çš„"),n("a",{attrs:{href:"https://github.com/agiledigital/typed-redux-saga",target:"_blank",rel:"noopener noreferrer"}},[t._v("typed-redux-saga"),n("OutboundLink")],1),t._v("ï¼Œå®ƒæ˜¯é­”æ”¹äº†"),n("code",[t._v("call")]),t._v("æ–¹æ³•å¤–åŠ æ–°çš„"),n("code",[t._v("yield*")]),t._v("è¯­æ³•å®ç°çš„ç±»å‹æ¨å¯¼ã€‚å½“ç„¶é­”æ”¹è¿™ç§ä¸œè¥¿è¦å¼•å…¥æ–°çš„ babel æ’ä»¶ï¼Œè€Œä¸”è¿™äº›éƒ½ä¸æ˜¯å®˜æ–¹çš„æ–¹æ¡ˆï¼Œå¤§å®¶éƒ½ä¸å¤ªæ•¢ç”¨ã€‚")]),t._v(" "),n("p",[t._v("ä¸ªäººè®¤ä¸ºç›¸å¯¹åˆç†çš„åšæ³•æ˜¯ä¸‹é¢è¿™ç§ï¼Œæ³¨æ„å¤šå‡ºæ¥çš„"),n("code",[t._v("SagaReturnType")]),t._v("å·¥å…·ç±»å‹ï¼š")]),t._v(" "),n("div",{staticClass:"language-ts extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ts"}},[n("code",[n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getUnreadMsgCount")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("_"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" call"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" put "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" response"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" SagaReturnType"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("typeof")]),t._v(" getUnreadMsgCount"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("yield")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("call")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("getUnreadMsgCount"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" response"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("data"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("æ—¢ç„¶æ— æ³•åšåˆ°ç±»å‹æ¨å¯¼ï¼Œé‚£å°±æ‰“ä¸€ç‚¹è¡¥ä¸å§ã€‚è™½ç„¶éœ€è¦æ‰‹åŠ¨å¢åŠ ç±»å‹ï¼Œä½†å¥½æ­¹ç®—æ˜¯æŠŠç±»å‹æ¨å¯¼ç»™æ¥ä¸Šäº†ã€‚è¿™å°±å¥½æ¯”ä¸€ä¸ªäººéª¨æŠ˜äº†ï¼Œæ— æ³•è‡ªè¡Œæ„ˆåˆï¼Œäºæ˜¯åŒ»ç”Ÿç»™ä½ æ‰“ä¸Šé’¢æ¿å¸®ä½ æ„ˆåˆã€‚å…·ä½“ç»†èŠ‚å¯ä»¥å‚è€ƒ"),n("a",{attrs:{href:"https://spin.atomicobject.com/2020/08/06/redux-saga-call-effect/",target:"_blank",rel:"noopener noreferrer"}},[t._v("è¿™ç¯‡æ–‡ç« "),n("OutboundLink")],1),t._v("ã€‚")]),t._v(" "),n("h2",{attrs:{id:"æ²¡æœ‰å…¨å±€çš„-state-ç±»å‹"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#æ²¡æœ‰å…¨å±€çš„-state-ç±»å‹"}},[t._v("#")]),t._v(" æ²¡æœ‰å…¨å±€çš„ state ç±»å‹")]),t._v(" "),n("p",[t._v("ç»„ä»¶é‡Œè®¿é—® redux çš„ selector å†™æ³•æ˜¯è¿™æ ·çš„ï¼ˆè¿™ä¹Ÿæ˜¯ react-redux å®˜æ–¹æ¨èçš„å†™æ³•ï¼‰ï¼š")]),t._v(" "),n("div",{staticClass:"language-ts extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ts"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" value "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("useSelector")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("state"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" GlobalState"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" state"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("test"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("p",[t._v("æ³¨æ„é‚£ä¸ª GlobalStateï¼Œå‰é¢åœ¨è®²çº¦å®šå¼çš„æ—¶å€™æœ‰æåˆ°è¿‡ï¼ŒDva ä¼šæŒ‰ç…§çº¦å®šæ‹¼æ¥æ‰€æœ‰çš„ stateï¼Œæ‰€ä»¥å®Œæ•´çš„ state ç±»å‹æ˜¯æ— æ³•é  ts æ¨å¯¼å‡ºæ¥çš„ï¼Œæ¢å¥è¯è¯´ï¼Œæˆ‘ä»¬å¾—ä¸åˆ° GlobalStateã€‚")]),t._v(" "),n("p",[t._v("å¦‚æœä¸åŠ  GlobalState çš„ç±»å‹é™å®šï¼Œä¸‹é¢çš„å†™æ³•å°±ä¼šæŠ¥é”™")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// stateé»˜è®¤æ˜¯anyç±»å‹ï¼Œè¿™é‡Œçš„å†™æ³•ä¼šæŠ¥ç±»å‹é”™è¯¯")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" value "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("useSelector")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("state")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" state"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("test"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("p",[t._v("åŒæ ·åœ°ï¼Œæƒ³è¦å¾—åˆ° GlobalState ä¹Ÿä¸æ˜¯ä¸å¯ä»¥ï¼Œæœ‰ä»¥ä¸‹å‡ ç§åšæ³•ï¼š")]),t._v(" "),n("p",[t._v("ç¬¬ä¸€ç§æ–¹æ³•æ˜¯æ‰‹å†™ä»£ç å¼•å…¥æ‰€æœ‰ state ç„¶å combine åœ¨ä¸€èµ·å¾—åˆ° global stateã€‚è¿™ç§åšæ³•çš„æœ€å¤§é—®é¢˜åœ¨äºå¢åŠ äº†ä»£ç çš„ç»´æŠ¤æˆæœ¬ï¼Œæ–°å¢ model æˆ–è€…åˆ é™¤ model éƒ½éœ€è¦å¯¹ combine ä»£ç åšå¤„ç†ï¼Œè€Œä¸”è¿™æ®µä»£ç æ²¡æœ‰å®é™…æ•ˆæœï¼Œå”¯ä¸€çš„ä½œç”¨æ˜¯è®© ts æ¨å¯¼å‡ºç±»å‹ï¼Œä¹Ÿç°å¾—æœ‰äº›é¸¡è‚‹ã€‚")]),t._v(" "),n("p",[t._v("ç¬¬äºŒç§æ–¹æ³•æ˜¯å°†æ‰‹å†™ä»£ç çš„è¿‡ç¨‹è‡ªåŠ¨åŒ–ï¼Œé­”æ”¹ dva å†…éƒ¨å®ç°è‡ªåŠ¨æ„é€  combine çš„ä»£ç ã€‚è¿™ç§åšæ³•çœ‹ä¼¼èŠ‚çœäº†ç»´æŠ¤æˆæœ¬ï¼Œä½†å®é™…ä¸Šç»´æŠ¤æˆæœ¬åè€Œå¯èƒ½æ›´é«˜ã€‚å› ä¸ºè‡ªåŠ¨ç”Ÿæˆçš„ combine ä»£ç å¾—è¿›å…¥ä»£ç ä»“åº“ï¼Œå¤šäººåä½œæ—¶è¿™ç§è‡ªåŠ¨ç”Ÿæˆçš„ä»£ç å¾ˆå®¹æ˜“äº§ç”Ÿå†²çªï¼Œè€Œä¸”ä¹Ÿä¸å¥½å¤„ç†ï¼ˆå³ä½¿ä¸è¿›å…¥ä»£ç ä»“åº“ï¼Œé‚£ä½ æœ¬åœ°å¤šä¸ªåˆ†æ”¯é—´åˆ‡æ¢çš„æ—¶å€™ä¹Ÿå®¹æ˜“æŠ¥å†²çªï¼‰ã€‚æœ¬è´¨ä¸Šè¿™ç§åšæ³•æ˜¯å°†é¡¹ç›®çš„ç”Ÿå‘½å‘¨æœŸæ‹†åˆ†å‡ºäº†ä¸€ä¸ªé¢„ç¼–è¯‘é˜¶æ®µï¼Œå¤šäº†ä¸€ä¸ªé˜¶æ®µï¼Œç®¡ç†å’Œç»´æŠ¤æˆæœ¬å…¶å®è¦å¤§å¾ˆå¤šã€‚")]),t._v(" "),n("p",[t._v("ç¬¬ä¸‰ç§åšæ³•æ˜¯ç¼–å†™ä¸€ä¸ª vscode æ’ä»¶ï¼Œå°†ç¬¬äºŒæ­¥ä¸­çš„è‡ªåŠ¨æ„é€  combine ä»£ç çš„è¿‡ç¨‹æ”¾åˆ°æ’ä»¶é‡Œåšï¼Œåªè¦æ’ä»¶æ£€æµ‹åˆ°æ˜¯ä¸€ä¸ª dva é¡¹ç›®ï¼Œå°±åœ¨åå°è‡ªåŠ¨æ„é€ äº§ç”Ÿ combine ä»£ç ã€‚è¿™æ ·å¯ä»¥åšåˆ°å¼€å‘æ—¶æ— æ„ŸçŸ¥ï¼Œä¹Ÿä¸ç”¨æ‹…å¿ƒåœ¨ä»€ä¹ˆæ—¶æœºè§¦å‘é¢„ç¼–è¯‘åŠ¨ä½œã€‚å½“ç„¶ï¼Œè¿™ç§åšæ³•æˆæœ¬æ˜¯æ¯”è¾ƒé«˜çš„ï¼Œæ¯•ç«Ÿè¦å¼€å‘ä¸€ä¸ª vscode æ’ä»¶ï¼Œå¦‚æœå›¢é˜Ÿé‡Œæœ‰äººä¸ç”¨ vscode è€Œæ˜¯è¦ç”¨ webstorm æ€ä¹ˆåŠï¼Œéš¾é“è¿˜è¦å†™ä¸€ä¸ª webstorm æ’ä»¶å—ï¼Ÿæ€»ä¹‹è¿™ç§æ–¹æ¡ˆä¸æ˜¯å¾ˆé è°±ã€‚")]),t._v(" "),n("p",[t._v("ç¬¬å››ç§åšæ³•æ˜¯é­”æ”¹ ts serverï¼Œé€šè¿‡ ts æ’ä»¶çš„æ–¹å¼å¢åŠ æ–°çš„æŠ¥é”™æ£€æŸ¥å’Œæç¤ºçš„èƒ½åŠ›ï¼ˆå°±åƒ css modules çš„å¤„ç†é‚£æ ·ï¼‰ã€‚è¿™ç§åŠæ³•æƒ³æƒ³å°±çŸ¥é“æˆæœ¬å¾ˆé«˜ï¼Œè€Œä¸”é­”æ”¹äº† ts server å¯¹ä»¥åè¿ç§»å’Œå‡çº§ ts å¯èƒ½ä¹Ÿä¼šå¸¦æ¥é˜»ç¢ã€‚æ‰€ä»¥è¿™ç§æ–¹æ¡ˆç®€å•è°ƒç ”äº†ä¸€ä¸‹å°±æ¯«ä¸çŠ¹è±«æ”¾å¼ƒäº†ã€‚")]),t._v(" "),n("p",[t._v("æœ€ç»ˆï¼Œå…³äº global state çš„é—®é¢˜ï¼Œæˆ‘æ˜¯æ²¡æœ‰æ‰¾åˆ°åˆé€‚çš„æ–¹æ¡ˆã€‚æœ€åçš„å†™æ³•æ˜¯åœ¨ selector å¤„æ‰‹åŠ¨å¼•å…¥å¯¹åº”çš„ stateï¼Œå°±åƒè¿™æ ·ï¼š")]),t._v(" "),n("div",{staticClass:"language-ts extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ts"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" value "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("useSelector")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" test "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" test"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" TestState "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" test"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("p",[t._v("å†™èµ·æ¥è™½ç„¶ä¸å¦‚ global state é‚£æ ·ç®€æ´ä¼˜é›…ï¼Œä½†æ˜¯èµ·ç ç±»å‹æ£€æŸ¥è¿˜åœ¨ï¼Œä¹Ÿåªèƒ½è¿™æ ·äº†ã€‚")]),t._v(" "),n("h2",{attrs:{id:"è‡ªåŠ¨æ¨å¯¼-model-ç±»å‹ï¼Ÿ"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#è‡ªåŠ¨æ¨å¯¼-model-ç±»å‹ï¼Ÿ"}},[t._v("#")]),t._v(" è‡ªåŠ¨æ¨å¯¼ model ç±»å‹ï¼Ÿ")]),t._v(" "),n("p",[t._v("æ€»ç»“ä¸€ä¸‹ä¸Šé¢çš„ç‚¹ï¼Œæœ€ç»ˆå…³äº model çš„ç±»å‹è¡¥å…¨ï¼Œå¤§è‡´é•¿è¿™æ ·ï¼š")]),t._v(" "),n("div",{staticClass:"language-ts extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ts"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ¨å¯¼å‡ºactionçš„å·¥å…·ç±»å‹")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("type")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("GenerateAction"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("M")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ¨å¯¼å‡ºcommandsçš„å·¥å…·ç±»å‹")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("type")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Commands"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("A")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å•ç‹¬å†™stateçš„ç±»å‹æ–¹ä¾¿ä¸‹é¢å¼•ç”¨")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("type")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TestState")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å®Œæˆmodelçš„ç±»å‹å®šä¹‰")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("type")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TestModel")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  namespace"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'test'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  state"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" TestState"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  reducers"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("foo")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("state"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" TestState"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" action"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" payload"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("number")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" TestState"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  effects"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("bar")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("action"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" payload"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" commands"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Commands"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("TestAction"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å®Œæˆactionçš„ç±»å‹æ¨å¯¼")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" TestAction "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" GenerateAction"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("TestModel"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æœ€åæ˜¯modelçš„å…·ä½“ä»£ç ")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" testModel"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" TestModel "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("p",[t._v("ï¼ˆå®Œæ•´çš„ä»£ç å¤ªé•¿äº†è¿™é‡Œå°±ä¸è´´å‡ºäº†ï¼Œå¦‚æœæ„Ÿå…´è¶£å¯ä»¥ç•™è¨€ï¼‰")]),t._v(" "),n("p",[t._v("è¿™ä¸ªå†™æ³•æœ‰ä¸ªä¸è¶³çš„åœ°æ–¹ï¼Œé‚£å°±æ˜¯éœ€è¦æ‰‹åŠ¨å…ˆæŠŠ model çš„ç±»å‹å†™å‡ºæ¥ã€‚èƒ½å¦æŠŠè¿™ä¸ªè¿‡ç¨‹ç›´æ¥çœç•¥äº†å‘¢ï¼Ÿæ¯”å¦‚åƒè¿™æ ·ï¼š")]),t._v(" "),n("div",{staticClass:"language-ts extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ts"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" testModel "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("type")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TestModel")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" GenerateModel"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("typeof")]),t._v(" testModel"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("type")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TestAction")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" GenerateAction"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("TestModel"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("p",[t._v("èµ·åˆæˆ‘è§‰å¾—å¯ä»¥å‚è€ƒ vue çš„ç±»å‹æ¨å¯¼é‚£æ ·ï¼Œåˆ©ç”¨å‡½æ•°æ³›å‹å®ç° model çš„è‡ªåŠ¨ç±»å‹æ¨å¯¼ï¼Œæ¯”å¦‚ï¼š")]),t._v(" "),n("div",{staticClass:"language-ts extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ts"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä¸€ä¸ªå·¥å…·ç±»å‹")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("type")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Model"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("N")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("S")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("R")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("E")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  namespace"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("N")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  state"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("S")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  reducers"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("R")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  effects"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("E")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åˆ©ç”¨å‡½æ•°æ³›å‹çš„æ¨å¯¼æ•ˆæœè‡ªåŠ¨æ¨å¯¼å‡ºnamespaceã€stateã€reducersã€effectsçš„ç±»å‹")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token generic-function"}},[n("span",{pre:!0,attrs:{class:"token function"}},[t._v("descModel")]),n("span",{pre:!0,attrs:{class:"token generic class-name"}},[n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("N")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("S")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("R")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("E")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")])])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("namespace"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("N")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" state"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("S")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" reducers"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("R")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" effects"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("E")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Model"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("N")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("S")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("R")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("E")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" namespace"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" state"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" reducers"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" effects "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åˆ©ç”¨descModelå‡½æ•°æ„é€ modelçš„åŒæ—¶ä¹Ÿæ„é€ å‡ºäº†modelçš„ç±»å‹")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" testModel "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("descModel")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'test'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åœ¨è¿™é‡Œå†™æ¸…æ¥šreducerå’Œeffectçš„ç±»å‹å®šä¹‰")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("foo")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("state"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" payload "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" payload"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("number")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("bar")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" payload "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" payload"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" commands"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Commands"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("typeof")]),t._v(" testModel"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("p",[t._v("å®é™…ä¸Šè¿™é‡Œæ˜¯æœ‰é—®é¢˜çš„ï¼Œ"),n("code",[t._v("bar")]),t._v("çš„ commands å‚æ•°çš„ç±»å‹ä¾èµ–äº model çš„ç±»å‹ï¼Œè€Œ model çš„ç±»å‹åˆä¾èµ–äº"),n("code",[t._v("bar")]),t._v("çš„ç±»å‹ï¼Œäºæ˜¯äº§ç”Ÿäº†ç±»å‹é€’å½’ã€‚ts åœ¨ä¸€å®šç¨‹åº¦ä¸Šå…è®¸é€’å½’ç±»å‹ï¼Œä½†è¿™ç§æ˜¾ç„¶è¿‡äºå¤æ‚æ— æ³•æ”¯æŒï¼Œç»“æœå°±æ˜¯ç±»å‹æ¨å¯¼å´©æºƒäº†ï¼Œæœ€å fallback åˆ°äº† anyï¼Œts çš„æŠ¥é”™æ˜¯è¿™æ ·æè¿°çš„ï¼š")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("has type 'any' because it does not have a type annotation and is referenced directly or indirectly in its own initializer.\n")])])]),n("p",[t._v("æˆ‘å°è¯•äº†å¾ˆå¤šç§å†™æ³•æƒ³è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä½†éƒ½å¤±è´¥äº†ï¼Œä¹Ÿè®¸ä»æ ¹æœ¬ä¸Šæ¥è®²ï¼Œè¿™ç§é€’å½’ç±»å‹ç¡®å®æ˜¯æ— æ³•å®ç°çš„ã€‚å¦‚æœç¡®å®æ˜¯è¿™æ ·ï¼Œé‚£ä¹ˆè‡ªåŠ¨æ¨å¯¼å‡º model çš„ç±»å‹è¿™ä¸ªæƒ³æ³•ä¹Ÿæ˜¯æ— æ³•å®ç°çš„ã€‚")]),t._v(" "),n("p",[t._v("å¦‚æœä½ æœ‰å¥½çš„åŠæ³•ï¼Œæ¬¢è¿å‘Šè¯‰æˆ‘ã€‚")]),t._v(" "),n("h2",{attrs:{id:"åè®°"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#åè®°"}},[t._v("#")]),t._v(" åè®°")]),t._v(" "),n("p",[t._v("æ•´ä¸ªè¿ç§»è¿‡ç¨‹é‡åˆ°äº†å¾ˆå¤šå‘ï¼Œè¿™é‡Œåªæ˜¯æŠŠå°è±¡æ¯”è¾ƒæ·±åˆ»è®°å½•äº†ä¸€ä¸‹ï¼Œå…¶å®è¿˜æœ‰è›®å¤šå°é—®é¢˜çš„ã€‚æ¯”å¦‚æœ‰ä¸ª eslint çš„æŠ¥é”™ï¼š"),n("code",[t._v("Missing return type on function.eslint@typescript-eslint/explicit-module-boundary-types")]),t._v("ï¼Œè¿™ä¸ªé—®é¢˜æŸ¥åˆ°åé¢å‘ç°åŸæ¥æ˜¯ eslint çš„ä¸€ä¸ª rule çš„ bugï¼Œè‡³ä»Šä¹Ÿæ²¡æœ‰å½»åº•è§£å†³ï¼Œæœ€ååªå¾—æŠŠè¿™ä¸ªè§„åˆ™ç»™ disable æ‰äº†ã€‚")]),t._v(" "),n("p",[t._v("æ€»çš„æ¥çœ‹ï¼ŒDva çš„ ts è¿ç§»ä½“éªŒä¸€ç‚¹ä¹Ÿä¸çˆ½ï¼Œä¸»è¦æ˜¯å› ä¸ºä¸¤ç‚¹å§ï¼Œä¸€æ˜¯ Dva ä½¿ç”¨äº†çº¦å®šå¼å†™æ³•ï¼Œè¿™å¯¼è‡´å¾ˆå¤š ts çš„é™æ€æ£€æŸ¥å¾ˆéš¾å‘æŒ¥ä½œç”¨ï¼Œæ‰€æœ‰é‡‡ç”¨çº¦å®šå¼å†™æ³•çš„æ¡†æ¶éƒ½ä¼šé‡åˆ°è¿™ä¸ªé—®é¢˜ã€‚äºŒæ˜¯ Dva åº•å±‚ä¾èµ– redux-sagaï¼Œgenerator çš„é—®é¢˜æ³¨å®šäº†ç±»å‹æ¨å¯¼æ— æ³•å¹³æ»‘å®ç°ï¼Œåªèƒ½æ‰“è¡¥ä¸ã€‚")]),t._v(" "),n("p",[t._v("è€Œä»¥ä¸Šä¸¤ç‚¹ï¼Œéƒ½æ˜¯ä»åŸç†ä¸Šæ³¨å®šäº†æ— æ³•ä½“é¢åœ°æ”¹å–„å’Œä¼˜åŒ–ã€‚æ‰€ä»¥æˆ‘æƒ³è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆ Dva å®˜æ–¹è‡³ä»Šä¸€ç›´æ²¡æœ‰ç»™å‡º ts å‚è€ƒå®è·µçš„ä¸€ä¸ªåŸå› å§ï¼Œä¸æ˜¯ä¸æƒ³å¼„ï¼Œè€Œæ˜¯ç¡®å®å¼„ä¸äº†ã€‚")]),t._v(" "),n("p",[n("img",{attrs:{src:a(244),alt:"js and ts"}})])])}),[],!1,null,null,null);s.default=e.exports}}]);