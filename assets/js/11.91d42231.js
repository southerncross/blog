(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{314:function(t,s,a){t.exports=a.p+"assets/img/location_header.f9aed7a5.png"},315:function(t,s,a){t.exports=a.p+"assets/img/too_many_redirect.9c5cffa9.png"},316:function(t,s,a){t.exports=a.p+"assets/img/redirect_no_body.5b830657.png"},317:function(t,s,a){t.exports=a.p+"assets/img/redirect_size.79521dd5.png"},318:function(t,s,a){t.exports=a.p+"assets/img/redirect_post.06f7d307.png"},319:function(t,s){t.exports="data:image/png;base64,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"},320:function(t,s){t.exports="data:image/png;base64,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"},321:function(t,s,a){t.exports=a.p+"assets/img/response_url.07a3bd49.png"},424:function(t,s,a){"use strict";a.r(s);var e=a(14),n=Object(e.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("blockquote",[s("p",[t._v("众所周知，重定向很简单🤥")])]),t._v(" "),s("p",[t._v("3开头的HTTP状态码都比较有意思，比如与缓存有关的304，比如与重定向有关的301、302。正好最近做项目遇到了一些重定向有关的内容，稍微整理一下。")]),t._v(" "),s("h2",{attrs:{id:"重定向的基本流程"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#重定向的基本流程"}},[t._v("#")]),t._v(" 重定向的基本流程")]),t._v(" "),s("p",[t._v("重定向的流程是这样的（以302临时重定向为例，因为最常用，下同）：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("client               server\n  |      request       |\n  |-------------------\x3e|\n  |        302         |\n  |<-------------------|\n  |     new request    |\n  |-------------------\x3e|\n  |      response      |\n  |<-------------------|\n")])])]),s("p",[t._v("可见实际上是发了2次请求，第一次请求后，服务端返回302状态码，前端浏览器再朝着跳转目的地址发起一个新的请求。跳转的目的地址是在第一次请求响应的location头部指定的。")]),t._v(" "),s("p",[s("img",{attrs:{src:a(314),alt:"location header"}})]),t._v(" "),s("p",[t._v("location没有限制一定得是同域的URL，因此跳转到其他域下面是可以的。")]),t._v(" "),s("p",[t._v("需要注意2点：")]),t._v(" "),s("ol",[s("li",[t._v("要想能够成功重定向，状态码和location头部二者缺一不可。")]),t._v(" "),s("li",[t._v("重定向这个操作是后端控制的，浏览器会自动识别跳转场景然后重新向跳转地址发起新请求。整个过程对前端是透明的，也就是在前端眼中就像是只有一次请求一样，仿佛前面的请求是空气。")])]),t._v(" "),s("h2",{attrs:{id:"可以多次重定向"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#可以多次重定向"}},[t._v("#")]),t._v(" 可以多次重定向")]),t._v(" "),s("p",[t._v("重定向可以有多次，比如连续的302，此时流程大致就是这样：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("client               server\n  |      request       |\n  |-------------------\x3e|\n  |        302         |\n  |<-------------------|\n  |     new request    |\n  |-------------------\x3e|\n  |        302         |\n  |<-------------------|\n           ...\n  |     new request    |\n  |-------------------\x3e|\n  |        302         |\n  |<-------------------|\n  |     new request    |\n  |-------------------\x3e|\n  |      response      |\n  |<-------------------|\n")])])]),s("p",[t._v("这是个什么场景呢？就是location对应的URL又返回了302和新的location，如此重复直到不再跳转位置。")]),t._v(" "),s("p",[t._v("当然，为了防止出现无限重定向的情况，重定向的次数是有上限的。经过测试Chrome浏览器的重定向次数是20，也就是一次请求如果超过20次重定向，就会报"),s("code",[t._v("ERR_TOO_MANY_REDIRECT")]),t._v("错误：")]),t._v(" "),s("p",[s("img",{attrs:{src:a(315),alt:"too many redirect"}})]),t._v(" "),s("p",[t._v("另外在实际测试的过程中偶然发现即使页面已经报TOO_MANY_REDIRECT了，chrome还是会“不死心”地过一段时间再跳转几次😂，如果新的跳转最终停下来了，页面就不再报TOO_MANY_REDIRECT，所以理论上这个重试的上限是其实并不是那么严格（这里只测试了Chrome）。")]),t._v(" "),s("h2",{attrs:{id:"浏览器会忽略掉重定向请求的body"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#浏览器会忽略掉重定向请求的body"}},[t._v("#")]),t._v(" 浏览器会忽略掉重定向请求的body")]),t._v(" "),s("p",[t._v("浏览器如果发现当前请求的响应要重定向，则会直接忽略掉response的body，无法在开发者工具中的network面板上看到body，这点跟浏览器对跨域请求的处理很像。")]),t._v(" "),s("p",[s("img",{attrs:{src:a(316),alt:"redirect no response body"}})]),t._v(" "),s("p",[t._v("这里有一个比较迷惑的地方，如果你看network面板，会发现response的size很小，好像只有header一样：")]),t._v(" "),s("p",[s("img",{attrs:{src:a(317),alt:"redirect response size"}})]),t._v(" "),s("p",[t._v("最开始在测试的时候我也在想“会不会是后端没有返回body？”，然后用curl测试了一下，是可以拿到body的。所以说明这是浏览器给忽略了（或者说是丢弃了）")]),t._v(" "),s("p",[t._v("举一个实际中的例子：比如后端在GET一个页面重定向的时候除了返回302之外，还在body里返回了一个页面（希望做loading效果），实际上浏览器在最终的页面请求返回之前始终是白屏，那个中间页面是不会生效的，因为被浏览器丢弃了。不知道有什么办法能拿到body，反正我是没有找到。")]),t._v(" "),s("p",[t._v("仔细想一想，这样还是蛮合理的，你都重定向了，自然也压根不用关心返回了啥，只要告诉我新的目标地址就行了，少啰嗦。本身重定向就是对前端透明的，前端看来就像是一次请求一样。")]),t._v(" "),s("p",[t._v("似乎只要是3开头的HTTP响应状态码，浏览器都会忽略body？🤨")]),t._v(" "),s("p",[t._v("既然如此，在实现后端的时候，看到3开头的请求，也别返回什么body了，只返回header就行了。")]),t._v(" "),s("h2",{attrs:{id:"不光普通的页面get是可以重定向的-ajax同样可以重定向"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#不光普通的页面get是可以重定向的-ajax同样可以重定向"}},[t._v("#")]),t._v(" 不光普通的页面GET是可以重定向的，AJAX同样可以重定向")]),t._v(" "),s("p",[t._v("比如我们做个试验，启动一个node server：")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" http "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nhttp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createServer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("req"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" res")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("req"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("method"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" req"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("url"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("req"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("url "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/redirect'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    res"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("writeHead")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("302")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("location")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http://localhost:8848/done'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    res"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("writeHead")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    res"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("write")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'hello'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  res"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("end")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("listen")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("8848")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("在浏览器中发起一个AJAX请求：")]),t._v(" "),s("p",[s("img",{attrs:{src:a(318),alt:"redirect POST"}})]),t._v(" "),s("p",[t._v("可以看到返回的内容是"),s("code",[t._v("hello")]),t._v("。")]),t._v(" "),s("p",[t._v("如果你理解了上文提到的重定向的流程，那你应该就自然能够理解下面的几个问题了：")]),t._v(" "),s("ol",[s("li",[t._v("如果AJAX请求在跳转期间也有数据返回（response body），最终的请求以哪个数据为准？")]),t._v(" "),s("li",[t._v("如果AJAX请求是上传一个文件，那这个文件会被上传几次？")]),t._v(" "),s("li",[t._v("既然location可以是不同域的，那么可以通过302实现跨域AJAX吗？")]),t._v(" "),s("li",[t._v("对于GET页面的请求，重定向后第二次发起的请求里的refer是最开始的页面的URL还是第一次请求的URL？")])]),t._v(" "),s("p",[t._v("答案是：")]),t._v(" "),s("ol",[s("li",[t._v("跳转期间的body都会被浏览器忽略掉，只有最后一次的body是有效的。")]),t._v(" "),s("li",[t._v("发了几次请求就会上传几次文件，因为浏览器会在跳转时发起同样的新请求。所以如果有这样的场景，千万别跳转，太蛋疼了😑。")]),t._v(" "),s("li",[t._v("不能，因为跳转的本质上就是多发了一次请求，该有的跨域限制一样还是会有，如果跳转过程出现了跨域问题，那后面的请求也就不会继续了。")]),t._v(" "),s("li",[t._v("是最开始的页面的URL，因为重定向相当于是重新发了一次请求，请求所属页面的URL并没有变化。")])]),t._v(" "),s("p",[t._v("上面那个node的例子，如果你观察server端的log，你会发现:")]),t._v(" "),s("p",[s("img",{attrs:{src:a(319),alt:"redirect change method to GET"}})]),t._v(" "),s("p",[t._v("哟嚯，原本是POST请求，怎么跳转后变成GET了？这可不是bug，这是302的正常逻辑。跳转相关的状态码一共有301、302、307、308，其中301和302是一组，他们只会跳转GET请求，而307和308则分别是在301和302的基础上保留了跳转的方法。所以如果你把上面的node例子改成307，就会发现跳转后的请求也是POST了。")]),t._v(" "),s("p",[t._v("不过好在通常我们用GET就够了，AJAX的重定向很少见。")]),t._v(" "),s("h2",{attrs:{id:"临时跳转和永久跳转有啥区别"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#临时跳转和永久跳转有啥区别"}},[t._v("#")]),t._v(" 临时跳转和永久跳转有啥区别")]),t._v(" "),s("p",[t._v("我们知道，301是永久跳转，302是临时跳转。那他们有什么区别呢？一种说法是缓存的区别。比如浏览器在看到301永久跳转后，会在浏览器中记住这个跳转逻辑，下次再打跳转前的地址就会直接把URL改成跳转后的地址。但是经过尝试，似乎没有体现出这个逻辑。还一种说法是说搜索引擎爬虫的缓存区别，这个就没有测试了。")]),t._v(" "),s("p",[t._v("那么什么时候该用哪个呢？个人觉得临时跳转和永久跳转对浏览器来说没啥区别，但保不准不同浏览器行为不一致。所以尽量按照字面意思来使用吧。")]),t._v(" "),s("h2",{attrs:{id:"nothing-is-impossible-前端也是可以介入重定向的"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#nothing-is-impossible-前端也是可以介入重定向的"}},[t._v("#")]),t._v(" Nothing is impossible，前端也是可以介入重定向的")]),t._v(" "),s("p",[t._v("前面说过，重定向是一个纯后端控制的行为，其实这句话不够严谨。在Fetch API中，默认情况下确实是会自动重定向的（透明跳转），但实际上你可以通过控制redirect配置项实现“手动”重定向。比如后端返回302后浏览器不会自动发起重定向的请求，而是就结束了，要不要发起重定向的请求由前端js控制。比如：")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("fetch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http://localhost:8848/redirect'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("method")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'POST'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("redirect")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'manual'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 注意这里的manual")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("res")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" res"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("url"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("log"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("p",[t._v("API文档上说，在"),s("code",[t._v("redirect")]),t._v("是"),s("code",[t._v("manual")]),t._v("的时候，浏览器只会发起最开始的请求，之后的请求可以由手动控制。实际情况确实如此，浏览器直接把后面的跳转请求给cancel掉了：")]),t._v(" "),s("p",[s("img",{attrs:{src:a(320),alt:"redirect manual"}})]),t._v(" "),s("p",[t._v("不过API文档上说，"),s("code",[t._v("response.url")]),t._v("表示跳转的目标地址，实际上经过测试并不是：")]),t._v(" "),s("p",[s("img",{attrs:{src:a(321),alt:"response url"}})]),t._v(" "),s("p",[t._v("😓难道是浏览器bug了？总之很迷。")]),t._v(" "),s("h2",{attrs:{id:"重定向请求可以用来种cookie"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#重定向请求可以用来种cookie"}},[t._v("#")]),t._v(" 重定向请求可以用来种cookie")]),t._v(" "),s("p",[t._v("这是一个非常有意思的事情。虽然重定向请求的body会被浏览器忽略掉，但重定向请求响应的头部仍然可以发挥作用。这其中最重要的头部就是set-cookie了（种cookie）。")]),t._v(" "),s("p",[t._v("比如我访问某个页面，后端返回302的同时set-cookie，那么浏览器可以在发起跳转之前在当前页面的域下种上cookie（有种顺手做好事的感觉）。这个效果牛逼的地方在于，如果302跳转到其他域了，也仍然可以种cookie。比如：")]),t._v(" "),s("ol",[s("li",[t._v("用户访问a域名")]),t._v(" "),s("li",[t._v("后端返回302，location是b域名，同时set-cookie: cookieA")]),t._v(" "),s("li",[t._v("浏览器在a域名下种上cookie: cookieA，然后向b域名发起请求")]),t._v(" "),s("li",[t._v("后端返回302，location是a域名，同时set-cookie: cookieB")]),t._v(" "),s("li",[t._v("浏览器在b域名下种上cookie: cookieB，然后向a域名发起请求")])]),t._v(" "),s("p",[t._v("如果你觉得这有啥？没觉得有啥厉害的呀？那请站在前端的角度思考一下，这里相当于是实现了这样一种效果：一次请求即可向不同域名种下cookie（毕竟重定向是后端控制的，前端透明，相当于只有一次请求的效果）。如果不用重定向的话，你倒是给我找一个不用重定向的常规方法看看。。你可能会考虑配置CORS发一个跨域请求种cookie，但CORS一旦涉及到cookie这种credentials信息，就会出现各种各样的限制，实际很难发挥效果。现在知道这个方法的厉害之处了吧。")]),t._v(" "),s("blockquote",[s("p",[t._v("其实跨域种cookie还可以用浏览器的beacon API实现，当然也是有一些限制的")])]),t._v(" "),s("h2",{attrs:{id:"重定向都用来做啥"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#重定向都用来做啥"}},[t._v("#")]),t._v(" 重定向都用来做啥？")]),t._v(" "),s("p",[t._v("说了那么多，总算说到重点的部分了，重定向到底有啥用？前端也可以直接改"),s("code",[t._v("location.href")]),t._v("来跳转，干嘛需要后端重定向呢？")]),t._v(" "),s("p",[t._v("首先，别忘了网络爬虫，很多爬虫是无法执行javascript的，所以前端重定向如果是通过javascript动态实现的，就不会生效。这里也许有人会抬杠：前端也可以在meta标签里实现重定向呀，比如下面这样：")]),t._v(" "),s("div",{staticClass:"language-html extra-class"},[s("pre",{pre:!0,attrs:{class:"language-html"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("meta")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("http-equiv")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("refresh"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("content")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("0;URL='http://redirect.example.com/'"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n")])])]),s("p",[t._v("这么做确实不需要js也能前端重定向了，但有一个问题：前端跳转，务必得等前端资源加载完成后才触发跳转，html再小，也是需要一些体积的浏览器解析和执行也要花时间，而且还需要把html页面部署在某个server上，而后端的302跳转，可以只返回header，没有body（因为有body也没用），浏览器不需要解析直接跳转即可，也不需要专门托管某个html资源，无论是配置上还是性能上都真正做到了极简。因此在很多时候，后端302跳转都是比前端跳转更优的选择，毕竟前端透明，多一事不如少一事。")]),t._v(" "),s("p",[t._v("此外由于重定向是可以种cookie的，所以可以借助重定向功能实现跨域种cookie的工作，对于单点登录来说很有帮助。比如观察google的登录请求，就会发现它会先302到youtube种下cookie，然后再302回来到google种下cookie，以实现google和youtube的单点登录。")]),t._v(" "),s("p",[t._v("重定向的最常见应用场景就是OAuth2认证过程了。对资源的授权过程就是通过后端302跳转实现的，对前端透明，因而简化了OAuth2的对接逻辑。如果放在前端跳转，虽然可以但会让OAuth2的对接方每个人都要在前端实现一个跳转逻辑，增加了成本。")]),t._v(" "),s("p",[t._v("最后，后端302重定向也不是没有缺点。至少有一点是很头疼的，那就是hash路由问题。浏览器在发送请求的时候，会干掉url的hash部分，这对于一些使用了hash history的SPA来说就是灾难。即使location里的url完整地包含了hash，浏览器在发起新请求的时候，也不会带上hash。此时，前端重定向/跳转就是更好的选择了。")]),t._v(" "),s("h2",{attrs:{id:"总结"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[t._v("#")]),t._v(" 总结")]),t._v(" "),s("p",[t._v("服务端跳转这种场景，虽然看上去很简单，实际上还是有蛮多细节的。而且302跳转可以做的事情也很多，在服务端跳转和前端跳转方面，二者也是各有利弊。理清各个细节，才能更好地设计出技术方案。😎")]),t._v(" "),s("h2",{attrs:{id:"参考资料"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#参考资料"}},[t._v("#")]),t._v(" 参考资料")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/302",target:"_blank",rel:"noopener noreferrer"}},[t._v("302 Found"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://javascript.info/fetch-api",target:"_blank",rel:"noopener noreferrer"}},[t._v("Fetch API"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://www.w3.org/TR/WCAG20-TECHS/H76.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("HTML Meta Redirect"),s("OutboundLink")],1)])])])}),[],!1,null,null,null);s.default=n.exports}}]);