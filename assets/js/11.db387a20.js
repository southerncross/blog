(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{161:function(t,s,a){t.exports=a.p+"assets/img/corss_domain_test.28c9c871.png"},162:function(t,s,a){t.exports=a.p+"assets/img/who_should_read_this.486c28c4.png"},163:function(t,s){t.exports="data:image/png;base64,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"},164:function(t,s,a){t.exports=a.p+"assets/img/preflight_error.18cc20cc.png"},165:function(t,s,a){t.exports=a.p+"assets/img/cors_options.0f820dc4.png"},166:function(t,s,a){t.exports=a.p+"assets/img/credentials_error.63c2ed25.png"},167:function(t,s,a){t.exports=a.p+"assets/img/with_credentials_error_2.001aac58.png"},168:function(t,s,a){t.exports=a.p+"assets/img/x_csrf_token_not_allowed.aed91011.png"},301:function(t,s,a){"use strict";a.r(s);var n=a(3),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("p",[t._v("ä»Šå¤©æ™šä¸Šè·Ÿå›¢é˜Ÿé‡Œçš„å°ä¼™ä¼´ä¸€èµ·è°ƒæŸ¥äº†ä¸€ä¸ªéå¸¸è¯¡å¼‚çš„é—®é¢˜ï¼Œæ•´ä¸ªè¿‡ç¨‹æŠŠCORSåˆé‡æ–°æ¢³ç†äº†ä¸€éï¼Œæ­£æ‰€è°“â€œçº¸ä¸Šå¾—æ¥ç»ˆè§‰æµ…ï¼Œç»çŸ¥æ­¤äº‹è¦èº¬è¡Œâ€ï¼Œé€šè¿‡è¿™ä¸€æ¬¡è°ƒæŸ¥ï¼Œè®©æˆ‘å¯¹CORSçš„ç†è§£ä¸€ä¸‹å­æ·±åˆ»äº†è®¸å¤šã€‚")]),t._v(" "),n("p",[t._v("é—®é¢˜æ˜¯è¿™æ ·çš„ï¼šæœ‰ä¸ªåŠŸèƒ½éœ€è¦åœ¨æµè§ˆå™¨ç¯å¢ƒè°ƒç”¨é«˜å¾·åœ°å›¾WebAPIï¼ˆä¸€ä¸ªç®€å•çš„GETè¯·æ±‚ï¼‰ï¼Œç»“æœæµ‹è¯•çš„æ—¶å€™å‘ç°ï¼Œæœ‰çš„é¡µé¢è¯·æ±‚æ­£å¸¸ï¼Œæœ‰çš„é¡µé¢è¯·æ±‚ç«Ÿç„¶ä¼šæŠ¥è·¨åŸŸé”™è¯¯ã€‚")]),t._v(" "),n("p",[t._v("è¿™æ˜¯ä»€ä¹ˆé“ç† ğŸ˜…")]),t._v(" "),n("h1",{attrs:{id:"è·¨åŸŸæ˜¯ä»€ä¹ˆ"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#è·¨åŸŸæ˜¯ä»€ä¹ˆ"}},[t._v("#")]),t._v(" è·¨åŸŸæ˜¯ä»€ä¹ˆ")]),t._v(" "),n("p",[t._v("è®©æˆ‘ä»¬å…ˆæ¥å›å¿†ä¸€ä¸‹è·¨åŸŸæ˜¯ä»€ä¹ˆã€‚")]),t._v(" "),n("p",[t._v("æ‰€è°“"),n("code",[t._v("è·¨åŸŸ")]),t._v("ï¼Œè‡ªç„¶æ˜¯é’ˆå¯¹"),n("code",[t._v("åŒåŸŸ")]),t._v("æ¥è®²çš„ï¼Œè€Œ"),n("code",[t._v("åŒåŸŸ")]),t._v("è¿™ä¸ªæ¦‚å¿µå‡ºè‡ªæµè§ˆå™¨çš„"),n("a",{attrs:{href:"https://www.w3.org/Security/wiki/Same_Origin_Policy",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("åŒæºç­–ç•¥")]),n("OutboundLink")],1),t._v("ã€‚æ³¨æ„äº†ï¼Œåªæœ‰æµè§ˆå™¨ç¯å¢ƒæ‰æœ‰åŒæºç­–ç•¥ï¼Œä¹Ÿå°±æ˜¯åªæœ‰æµè§ˆå™¨ç¯å¢ƒæ‰æœ‰è·¨åŸŸçš„æƒ…å†µï¼Œéæµè§ˆå™¨ç¯å¢ƒå‘HTTPè¯·æ±‚æ˜¯ä¸ä¼šé‡åˆ°è·¨åŸŸçš„é—®é¢˜çš„ã€‚å› æ­¤æœ‰äº›å°ä¼™ä¼´å°è¯•ç”¨curlæˆ–è€…postmanç­‰å·¥å…·éªŒè¯è·¨åŸŸé—®é¢˜å¤šåŠæ˜¯ä¸ä¼šå¾—åˆ°æ­£ç¡®ç»“æœçš„ï¼Œå› ä¸ºè¿™ç§æƒ…å†µä¸‹å°±ä¸å­˜åœ¨è·¨åŸŸé—®é¢˜ã€‚")]),t._v(" "),n("p",[t._v("é‚£ä¹ˆæµè§ˆå™¨åˆæ˜¯å¦‚ä½•å¤„ç†è·¨åŸŸè¯·æ±‚çš„å‘¢ï¼Ÿå‡è®¾ç°åœ¨æˆ‘ä»¬åœ¨æµè§ˆå™¨ç¯å¢ƒä¸­å°è¯•å‘é€ä¸€ä¸ªè·¨åŸŸè¯·æ±‚ï¼Œè¿™ä¸ªè¯·æ±‚æ˜¯ä¼šè¢«æµè§ˆå™¨æˆªèƒ¡å‘¢è¿˜æ˜¯çœŸçš„å‘å‡ºå»å‘¢ï¼Ÿ")]),t._v(" "),n("p",[t._v("è¿™é‡Œä¸å¦¨è®©åšä¸ªå®éªŒï¼Œæœ¬åœ°èµ·ä¸€ä¸ªhttp serverï¼š")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" http "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nhttp"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("createServer")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("req"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" res")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  res"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setHeader")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'X-lishunyang'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'hello'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  res"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("write")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'world'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  res"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("end")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("listen")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("8848")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("p",[t._v("ç°åœ¨å°±åœ¨è¿™ä¸ªåšå®¢é‡Œï¼Œæ‰“å¼€æ§åˆ¶å°ï¼Œè¾“å…¥")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[t._v("fetch")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http://localhost:8848/'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("method")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'GET'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("p",[t._v("ç„¶åè§‚å¯Ÿchromeçš„networké¢æ¿ï¼Œç»“æœå‘ç°ï¼Œè¯·æ±‚ä¸ä»…å‘å‡ºäº†è€Œä¸”ä¹Ÿè¿”å›äº†ï¼Œå› ä¸ºæˆ‘ä»¬çœ‹åˆ°responseé‡ŒåŒ…å«äº†æˆ‘ä»¬è®¾ç½®çš„è‡ªå®šä¹‰headerï¼ˆçº¢æ¡†å†…å®¹ï¼‰ï¼Œåªä¸è¿‡responseçš„bodyæ˜¯ç©ºçš„ï¼ˆè™½ç„¶serverç«¯çš„ç¡®è¿”å›äº†ä¸œè¥¿ï¼‰ã€‚")]),t._v(" "),n("p",[n("img",{attrs:{src:a(161),alt:"cross domain test"}})]),t._v(" "),n("p",[t._v("æ‰€ä»¥å³ä¾¿æ˜¯ä¸ªè·¨åŸŸè¯·æ±‚ï¼Œchromeä¹Ÿä¼šæ­£å¸¸å‘å‡ºå’Œæ”¶åˆ°å“åº”ï¼Œåªä¸è¿‡chromeå°†responseçš„bodyéƒ¨åˆ†éšè—äº†èµ·æ¥ï¼Œå¹¶ä¸”åœ¨ä»£ç ä¸­æŠ›å‡ºå¼‚å¸¸ï¼Œå‘Šè¯‰ä½ è¯·æ±‚æœ‰è·¨åŸŸé—®é¢˜ï¼Œè¯·æ±‚å¤±è´¥äº†ã€‚")]),t._v(" "),n("blockquote",[n("p",[t._v("è¿™ç§å®é™…ä¸Šå‘å‡ºäº†ä½†æ˜¯è¢«æµè§ˆå™¨éšè—äº†å“åº”ä½“çš„è¯·æ±‚ï¼Œæœ‰ä¸€ä¸ªåå­—å«â€œé€æ˜è¯·æ±‚â€ï¼ˆopaque requestï¼‰ã€‚")])]),t._v(" "),n("p",[t._v("åŒæ ·çš„åŠ¨ä½œï¼Œå¦‚æœåœ¨firefoxä¸‹ï¼Œè¯·æ±‚æ˜¯å‘ä¸å‡ºå»çš„ï¼Œè€Œåœ¨edgeä¸‹åˆæ˜¯å¯ä»¥çš„ã€‚ä¸åŒæµè§ˆå™¨çš„è¡Œä¸ºä¸ä¸€è‡´ã€‚")]),t._v(" "),n("p",[t._v("æŸ¥è¯¢W3Cçš„åŒæºç­–ç•¥è§„èŒƒå¯ä»¥çŸ¥é“ï¼ŒåŒæºç­–ç•¥å…¶å®ä¸é™åˆ¶è¯·æ±‚çš„å‘å‡ºï¼Œåªæ˜¯é™åˆ¶äº†è·å–å“åº”æ•°æ®ã€‚ä½†æˆ‘è®¤ä¸ºfirefoxçš„å¤„ç†é€»è¾‘å…¶å®æ›´å¥½ï¼Œå› ä¸ºæ›´åŠ å®‰å…¨ã€‚æ¯”å¦‚æŸä¸ªè¯·æ±‚ä¸éœ€è¦å“åº”ä½“åªè¦å“åº”å¤´å°±è¡Œäº†ï¼Œç”šè‡³è¿å“åº”éƒ½ä¸è¡Œè¦ï¼Œåªè¦æŠŠè¯·æ±‚å‘å‡ºå»å°±è¡Œäº†ï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œchromeå’Œedgeçš„åŒæºç­–ç•¥ä¼šå¤±å»ä½œç”¨ã€‚")]),t._v(" "),n("h2",{attrs:{id:"ä¸ºä»€ä¹ˆè·¨åŸŸxhræ˜¯è¢«ç¦æ­¢çš„"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ä¸ºä»€ä¹ˆè·¨åŸŸxhræ˜¯è¢«ç¦æ­¢çš„"}},[t._v("#")]),t._v(" ä¸ºä»€ä¹ˆè·¨åŸŸxhræ˜¯è¢«ç¦æ­¢çš„")]),t._v(" "),n("p",[t._v("ä¸ºä»€ä¹ˆè·¨åŸŸè¯·æ±‚æ˜¯è¢«ç¦æ­¢çš„å‘¢ï¼Ÿæˆ‘ä»¬çŸ¥é“åœ¨æµè§ˆå™¨ç¯å¢ƒä¸­aã€imgã€scriptã€linkã€iframeç­‰æ ‡ç­¾å‘å‡ºçš„GETè¯·æ±‚æ˜¯ä¸å—åŒæºç­–ç•¥å½±å“çš„ï¼Œç”šè‡³formè¡¨å•å‘å‡ºçš„POSTè¯·æ±‚éƒ½æ˜¯ä¸å—åŒæºç­–ç•¥å½±å“çš„ï¼Œæ—¢ç„¶æœ‰è¿™ä¹ˆå¤šè¯·æ±‚éƒ½æ˜¯å¯ä»¥è·¨åŸŸçš„ï¼Œä¸ºä»€ä¹ˆæµè§ˆå™¨ååè¦é™åˆ¶è·¨åŸŸçš„xhrå‘¢ï¼Ÿ")]),t._v(" "),n("p",[t._v("å…³äºè¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä¸ªäººçš„ç†è§£æ˜¯ï¼šxhræ˜¯ç”±jså‘å‡ºè€Œä¸æ˜¯htmlæ ‡ç­¾å‘å‡ºï¼Œè¿™æ„å‘³ç€xhrçš„è¡Œä¸ºæ›´åŠ çµæ´»ï¼ˆGETã€PUTã€POSTã€DELETEï¼‰ï¼Œæºå¸¦çš„æ•°æ®æ›´åŠ ä¸å¯æ§ï¼ˆè‡ªå®šä¹‰headerå’Œbodyï¼‰ï¼Œæ›´å®¹æ˜“æ„é€ å‡ºæ¶æ„è¯·æ±‚ã€‚æ¯”å¦‚CSRFæ”»å‡»ï¼Œå› ä¸ºæœ‰äº†åŒæºç­–ç•¥çš„é™åˆ¶ï¼Œåªèƒ½æ˜¯é€šè¿‡htmlæ ‡ç­¾çš„å½¢å¼è§¦å‘ï¼ˆå¦åˆ™ä¹Ÿå°±ä¸å«CSRFäº†ï¼Œç›´æ¥å«RFå°±è¡Œäº†ï¼‰ã€‚")]),t._v(" "),n("h1",{attrs:{id:"cors"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#cors"}},[t._v("#")]),t._v(" CORS")]),t._v(" "),n("p",[t._v("è·¨åŸŸä¸ç¿»å¢™ä¸åŒï¼Œè·¨åŸŸå…¶å®æ˜¯ä¸€ç§å¸¸è§çš„ä¸šåŠ¡éœ€è¦ï¼Œå°¤å…¶æ˜¯é‚£äº›ç¬¬ä¸‰æ–¹å¼€æ”¾web APIï¼ˆæ¯”å¦‚å‰é¢æåˆ°çš„é«˜å¾·åœ°å›¾ï¼‰ï¼Œåªè¦å…è®¸åœ¨æµè§ˆå™¨ç¯å¢ƒä¸‹è°ƒç”¨ï¼Œé‚£å‡ ä¹å…¨éƒ½æ˜¯è·¨åŸŸè¯·æ±‚ã€‚æ­£å› ä¸ºå¦‚æ­¤ï¼Œæ‰ä¼šæœ‰CORSï¼ˆCross-Origin Resource Sharingï¼‰ï¼Œå®ƒæ˜¯W3Cæ‰€è§„å®šçš„åˆæ³•è·¨åŸŸæ–¹å¼ï¼ˆ"),n("a",{attrs:{href:"https://www.w3.org/TR/cors/",target:"_blank",rel:"noopener noreferrer"}},[t._v("è§„èŒƒè§è¿™é‡Œ"),n("OutboundLink")],1),t._v("ï¼‰ï¼Œæ‰€æœ‰æµè§ˆå™¨å’Œhttp serveréƒ½ä¼šéµå®ˆï¼Œå®ƒåˆ°åº•æœ‰å¤šé‡è¦ï¼Ÿçœ‹çœ‹Mozilla MDNçš„è¯´æ³•ï¼š")]),t._v(" "),n("p",[n("img",{attrs:{src:a(162),alt:"who should read this"}})]),t._v(" "),n("p",[t._v("è®°ä½ä¸‹é¢ä¸‰ä¸ªæ¦‚å¿µå¯¹äºç†è§£CORSå¾ˆæœ‰å¸®åŠ©ï¼š")]),t._v(" "),n("ol",[n("li",[t._v("é¦–å…ˆï¼Œæ˜¯ä¸æ˜¯è·¨åŸŸï¼Œæµè§ˆå™¨è¯´äº†ç®—ã€‚")]),t._v(" "),n("li",[t._v("å…¶æ¬¡ï¼Œèƒ½ä¸èƒ½è·¨åŸŸï¼ŒæœåŠ¡å™¨è¯´äº†ç®—ã€‚")]),t._v(" "),n("li",[t._v("æœ€ç»ˆï¼Œè¦ä¸è¦è·¨åŸŸï¼Œæµè§ˆå™¨è¯´äº†ç®—ã€‚")])]),t._v(" "),n("h1",{attrs:{id:"ç®€å•è¯·æ±‚è·¨åŸŸ"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ç®€å•è¯·æ±‚è·¨åŸŸ"}},[t._v("#")]),t._v(" ç®€å•è¯·æ±‚è·¨åŸŸ")]),t._v(" "),n("p",[t._v("å›åˆ°æœ€å¼€å§‹çš„ä¾‹å­ï¼Œå¦‚æœæƒ³åœ¨å½“å‰åšå®¢åŸŸåä¸‹å‘localhostçš„httpæœåŠ¡å™¨æ­£å¸¸å‘é€GET xhrè¯·æ±‚ï¼Œæ€ä¹ˆåšå‘¢ï¼Ÿ")]),t._v(" "),n("p",[t._v("æ˜¾ç„¶æ˜¯è·¨åŸŸäº†ï¼Œå…ä¸å…è®¸è·¨åŸŸæ˜¯ç”±æœåŠ¡å™¨è¯´äº†ç®—çš„ã€‚")]),t._v(" "),n("p",[t._v("è¿™æ—¶æˆ‘ä»¬åªéœ€è¦åœ¨æœåŠ¡å™¨è¿”å›çš„å“åº”å¤´éƒ¨åŠ å…¥ä¸€ä¸ªheaderï¼š"),n("code",[t._v("access-controll-allow-origin: *")]),t._v("å³å¯ã€‚è¿™ä¸ªheaderçš„å«ä¹‰å·²ç»éå¸¸æ˜ç¡®äº†ï¼Œå°±æ˜¯å…è®¸è¯·æ±‚ä»ä»»ä½•åŸŸåå‘èµ·ã€‚æˆ‘ä»¬ç¨å¾®ä¿®æ”¹ä¸€ä¸‹ä¹‹å‰çš„ä»£ç ï¼š")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" http "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nhttp"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("createServer")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("req"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" res")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  res"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setHeader")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'X-lishunyang'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'hello'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  res"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setHeader")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'access-control-allow-origin'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'*'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ³¨æ„è¿™é‡Œ")]),t._v("\n  res"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("write")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'world'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  res"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("end")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("listen")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("8848")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("p",[t._v("ç°åœ¨å†ä»æµè§ˆå™¨ä¸­å‘èµ·è¯·æ±‚"),n("code",[t._v("fetch('http://localhost:8848')")]),t._v("ï¼Œå¯ä»¥çœ‹åˆ°è¯·æ±‚æˆåŠŸè¿”å›ï¼Œè·¨åŸŸè§£å†³äº†ã€‚")]),t._v(" "),n("p",[n("img",{attrs:{src:a(163),alt:"simple request"}})]),t._v(" "),n("p",[t._v("è¿™é‡Œçš„"),n("code",[t._v("access-control-allow-origin")]),t._v("å¤´éƒ¨ï¼Œå°±æ˜¯å…è®¸æ¥è‡ªå“ªäº›åŸŸåçš„è¯·æ±‚è·¨åŸŸã€‚é™¤äº†*ä¹‹å¤–ï¼Œè¿˜å¯ä»¥é…ç½®å…·ä½“çš„æºï¼ˆoriginï¼‰ï¼Œæ¯”å¦‚"),n("code",[t._v("http://localhost:8848")]),t._v("ã€‚")]),t._v(" "),n("p",[t._v("æ³¨æ„è¿™é‡Œallowçš„æ˜¯originï¼Œæ ¹æ®åŒæºç­–ç•¥çš„è§„å®šï¼Œoriginæ˜¯ç”±"),n("code",[t._v("schema")]),t._v("ï¼Œ"),n("code",[t._v("domain")]),t._v("ï¼Œ"),n("code",[t._v("port")]),t._v("ä¸‰éƒ¨åˆ†ç»„æˆã€‚")]),t._v(" "),n("p",[t._v("æ¯”å¦‚æˆ‘ä»¬å¯ä»¥å°†access-control-allow-originæ”¹ä¸º"),n("code",[t._v("https://blog.lishunyang.com")]),t._v("ã€‚")]),t._v(" "),n("p",[t._v("å“ªäº›è¯·æ±‚ç®—æ˜¯ç®€å•è¯·æ±‚å‘¢ï¼Ÿç®€å•æ¥è¯´å°±æ˜¯ï¼š")]),t._v(" "),n("ol",[n("li",[t._v("åªèƒ½æ˜¯ç®€å•æ–¹æ³•ï¼Œæ¯”å¦‚GETã€HEADã€POST")]),t._v(" "),n("li",[t._v("åªèƒ½è®¾ç½®ç®€å•å¤´éƒ¨ï¼Œæ¯”å¦‚Acceptã€Accept-Languageã€Cotnent-Languageæˆ–è€…å€¼æ˜¯application/x-www-form-urlencodedã€multipart/form-dataã€text/plainä¹‹ä¸€çš„Content-Typeã€‚")])]),t._v(" "),n("p",[t._v("æ³¨æ„ï¼Œç¬¬2ç‚¹éœ€è¦é¢å¤–å†è¯´æ˜ä¸€ä¸‹ï¼Œå¹¶ä¸æ˜¯è¯´ç®€å•è¯·æ±‚åªèƒ½å¸¦æœ‰ä¸Šè¿°å‡ ä¸ªheaderï¼Œè¿™é‡Œçš„æ„æ€æ˜¯è¯´ï¼Œå¦‚æœä½ æƒ³æ‰‹åŠ¨è®¾ç½®è¯·æ±‚çš„headerï¼Œé‚£åªèƒ½è®¾ç½®è¿™å‡ ç§ã€‚æµè§ˆå™¨è‡ªåŠ¨å¸®ä½ è®¾ç½®çš„headerä¸å—è¿™ä¸ªé™åˆ¶ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œæµè§ˆå™¨è‡ªåŠ¨å¸®ä½ ç»™requestä¸Šæ·»åŠ äº†cookieè¿™ä¸ªheaderï¼Œä»ç„¶ç®—æ˜¯ç®€å•è¯·æ±‚ã€‚")]),t._v(" "),n("p",[t._v("é™¤äº†ç®€å•è¯·æ±‚ä¹‹å¤–éƒ½ç®—æ˜¯å¤æ‚è¯·æ±‚ã€‚è¯·è®°ä½ä¸Šé¢è¿™ä¸¤ä¸ªæ¡ä»¶ï¼Œå¤æ‚è¯·æ±‚çš„å¤„ç†å…¶å®ä¹Ÿå°±æ˜¯å›´ç»•ç€è¿™ä¸¤ä¸ªä¸œè¥¿çš„å¤„ç†ã€‚")]),t._v(" "),n("h1",{attrs:{id:"å¤æ‚è¯·æ±‚è·¨åŸŸ"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#å¤æ‚è¯·æ±‚è·¨åŸŸ"}},[t._v("#")]),t._v(" å¤æ‚è¯·æ±‚è·¨åŸŸ")]),t._v(" "),n("p",[t._v("å¦‚æœæ˜¯å¤æ‚è¯·æ±‚ï¼Œæƒ…å†µè‡ªç„¶ä¹Ÿä¼šå¤æ‚ä¸€ç‚¹ã€‚æ­¤æ—¶æµè§ˆå™¨ä¼šéå¸¸è°¨æ…ï¼ŒæœåŠ¡å™¨éœ€è¦è¿”å›æ›´å¤šçš„ä¿¡æ¯å‘Šè¯‰æµè§ˆå™¨åˆ°åº•èƒ½ä¸èƒ½è·¨åŸŸã€‚")]),t._v(" "),n("p",[t._v("é¦–å…ˆï¼Œæµè§ˆå™¨ä¼šåœ¨æ­£å¼è¯·æ±‚å‘èµ·ä¹‹å‰å…ˆå‘é€ä¸€ä¸ªOPTIONSè¯·æ±‚ï¼Œç”¨æ¥å…ˆå‘æœåŠ¡å™¨æ‰“æ¢ä¸€ä¸‹æƒ…å†µã€‚è¿™ä¸ªOPTIONSè¯·æ±‚è¢«å«åšé¢„æ£€è¯·æ±‚ï¼ˆpreflight requestï¼‰ã€‚è¿™ä¸ªé¢„æ£€è¯·æ±‚æ˜¯æµè§ˆå™¨è‡ªåŠ¨å‘é€çš„ï¼Œæ— éœ€å¼€å‘è€…æ‰‹åŠ¨æ§åˆ¶ã€‚")]),t._v(" "),n("p",[t._v("æ¯”å¦‚æˆ‘ä»¬å‘localå‘èµ·ä¸€ä¸ªPUTè¯·æ±‚ï¼š"),n("code",[t._v("fetch('http://localhost:8848', { method: 'PUT' })")]),t._v("ï¼Œæ­¤æ—¶å°†çœ‹åˆ°æµè§ˆå™¨æŠ¥é¢„æ£€è¯·æ±‚é”™è¯¯ï¼š")]),t._v(" "),n("p",[n("img",{attrs:{src:a(164),alt:"preflight error"}})]),t._v(" "),n("p",[t._v("ç”±äºæµè§ˆå™¨ä¸ä¼šæ˜¾ç¤ºå¤±è´¥çš„OPTIONSè¯·æ±‚çš„ä¿¡æ¯ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥åœ¨åç«¯logå‡ºè¯·æ±‚ï¼Œå¯ä»¥çœ‹åˆ°è¿™æ˜¯ä¸ªOPTIONSè¯·æ±‚ï¼Œä¸”æœ‰ä¸€ä¸ª"),n("code",[t._v("access-control-request-method: PUT")]),t._v("çš„headerä»¥åŠä¸€ä¸ª"),n("code",[t._v("origin: xxxx")]),t._v("çš„headerã€‚")]),t._v(" "),n("p",[n("img",{attrs:{src:a(165),alt:"options"}})]),t._v(" "),n("p",[t._v("å¯¹äº†ï¼Œä¸Šé¢çš„ä¾‹å­å±•ç¤ºçš„æ˜¯æˆ‘ä»¬å‘å‡ºä¸€ä¸ªéç®€å•æ–¹æ³•çš„è¯·æ±‚ï¼Œå¦‚æœæˆ‘ä»¬å‘å‡ºçš„è¯·æ±‚è¿˜å¸¦æœ‰éç®€å•å¤´éƒ¨ï¼Œé‚£ä¹ˆOPTIONSè¯·æ±‚ä¹Ÿä¼šå“åº”å¸¦ä¸Š"),n("code",[t._v("access-control-request-header")]),t._v("ã€‚")]),t._v(" "),n("p",[t._v("æœåŠ¡å™¨ç«¯æ”¶åˆ°é¢„æ£€è¯·æ±‚åï¼Œå¯ä»¥æ ¹æ®originã€request-methodã€request-headerä¸‰ä¸ªä¿¡æ¯å†³å®šæ˜¯å¦å…è®¸æµè§ˆå™¨è·¨åŸŸï¼Œå¦‚æœå…è®¸åˆ™æœåŠ¡å™¨å¿…é¡»åœ¨OPTIONSçš„å“åº”å¤´éƒ¨åŒ…å«"),n("code",[t._v("access-control-allow-methods")]),t._v("æˆ–è€…"),n("code",[t._v("access-control-allow-headers")]),t._v("ã€‚æ¯”å¦‚æˆ‘ä»¬å¯ä»¥æŠŠserverç«¯ä»£ç æ”¹ä¸€ä¸‹ï¼š")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" http "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nhttp"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("createServer")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("req"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" res")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  res"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setHeader")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'X-lishunyang'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'hello'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  res"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setHeader")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'access-control-allow-origin'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'*'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  res"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setHeader")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'access-control-allow-methods'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'PUT'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ³¨æ„è¿™é‡Œ")]),t._v("\n  res"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("write")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'world'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  res"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("end")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("listen")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("8848")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("p",[t._v("å¦‚æœæ¯æ¬¡å¤æ‚è¯·æ±‚éƒ½è¦å‘é¢„æ£€è¯·æ±‚ï¼Œé‚£å²‚ä¸æ˜¯å¤ªå‚»äº†ï¼Œæ‰€ä»¥æœåŠ¡ç«¯è¿˜å¯ä»¥åœ¨OPTIONSçš„headeré‡Œå¢åŠ "),n("code",[t._v("access-control-max-age")]),t._v("ï¼Œå‘Šè¯‰æµè§ˆå™¨åœ¨ä¸€å®šç¼“å­˜æ—¶é—´å†…å°±ä¸ç”¨å†å‘é¢„æ£€è¯·æ±‚äº†ã€‚")]),t._v(" "),n("p",[t._v("æ­¤å¤–ï¼ŒæœåŠ¡å™¨è¿˜å¯ä»¥é€šè¿‡"),n("code",[t._v("access-control-expose-headers")]),t._v("æ¥å‘Šè¯‰æµè§ˆå™¨ï¼Œå…è®¸å“ªäº›headerè¢«å±•ç¤ºï¼Œå“ªäº›headerä¸è¢«å±•ç¤ºã€‚ä¸è¿‡ç»è¿‡æœ¬äººæµ‹è¯•ï¼Œè¿™ä¸ªä¼¼ä¹æ²¡ç”¨ã€‚")]),t._v(" "),n("h1",{attrs:{id:"å¸¦æœ‰credentialçš„è¯·æ±‚"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#å¸¦æœ‰credentialçš„è¯·æ±‚"}},[t._v("#")]),t._v(" å¸¦æœ‰credentialçš„è¯·æ±‚")]),t._v(" "),n("p",[t._v("credentialæŒ‡çš„æ˜¯ç”¨æˆ·è®¤è¯ç›¸å…³çš„ä¿¡æ¯ï¼Œæ¯”å¦‚cookieã€auth headerã€tlsè¯ä¹¦ç­‰ç­‰ã€‚ä¸ºäº†ä¿è¯å®‰å…¨ï¼Œæµè§ˆå™¨é»˜è®¤æ˜¯ä¸ä¼šåœ¨è·¨åŸŸè¯·æ±‚ä¸­åŒ…å«credentialä¿¡æ¯çš„ã€‚å› æ­¤ä½ ä¼šå‘ç°å‰é¢çš„ä¾‹å­é‡Œï¼Œæ‰€æœ‰è·¨åŸŸè¯·æ±‚çš„headeré‡Œéƒ½æ²¡æœ‰cookieã€‚")]),t._v(" "),n("p",[t._v("å…¶å®æµè§ˆå™¨æ˜¯æ”¯æŒå¼€å‘è€…æ‰‹åŠ¨æ§åˆ¶æ˜¯å¦å‘é€credentialsçš„ï¼Œæ¯”å¦‚"),n("code",[t._v("fetch('http://localhost:8848', { credendials: 'include' })")]),t._v("ï¼Œè®©æˆ‘ä»¬æµ‹è¯•çœ‹çœ‹ï¼Œç­‰ä¸€ä¸‹ï¼Œæ€ä¹ˆæŠ¥é”™äº†ï¼Ÿ")]),t._v(" "),n("p",[n("img",{attrs:{src:a(166),alt:"credentials error"}})]),t._v(" "),n("p",[t._v("è§‚å¯Ÿé”™è¯¯ä¿¡æ¯ï¼ŒåŸæ¥å¦‚æœè¯·æ±‚é‡Œå¸¦æœ‰äº†credentialsä¿¡æ¯ï¼Œ"),n("code",[t._v("access-control-allow-origin")]),t._v("å°±ä¸èƒ½ä¸º*ï¼Œä»ç„¶æ˜¯å‡ºäºå®‰å…¨è€ƒè™‘ï¼æ‰€ä»¥è®©æˆ‘ä»¬å†æ¬¡ä¿®æ”¹åç«¯ä»£ç ï¼š")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" http "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nhttp"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("createServer")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("req"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" res")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  res"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setHeader")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'X-lishunyang'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'hello'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  res"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setHeader")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'access-control-allow-origin'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'https://blog.lishunyang.com'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ³¨æ„è¿™é‡Œ")]),t._v("\n  res"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setHeader")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'access-control-allow-methods'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'PUT'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  res"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("write")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'world'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  res"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("end")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("listen")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("8848")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("p",[t._v("å†æ¬¡å°è¯•ï¼Œç­‰ç­‰ï¼Œæ€ä¹ˆè¿˜æœ‰æŠ¥é”™ï¼Ÿ")]),t._v(" "),n("p",[n("img",{attrs:{src:a(167),alt:"again, error"}})]),t._v(" "),n("p",[t._v("ä»”ç»†è§‚å¯Ÿé”™è¯¯ä¿¡æ¯ï¼ŒåŸæ¥å¦‚æœè¯·æ±‚ä¸­å¸¦æœ‰credentialsä¿¡æ¯ï¼Œserverç«¯å¿…é¡»è¿”å›"),n("code",[t._v("access-control-allow-credentials: true")]),t._v("æ‰è¡Œã€‚è®©æˆ‘ä»¬å†æ¬¡ä¿®æ”¹åç«¯ä»£ç ï¼š")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" http "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nhttp"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("createServer")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("req"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" res")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  res"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setHeader")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'X-lishunyang'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'hello'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  res"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setHeader")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'access-control-allow-origin'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'https://blog.lishunyang.com'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  res"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setHeader")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'access-control-allow-methods'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'PUT'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  res"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setHeader")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'access-control-allow-credentials'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'true'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ³¨æ„è¿™é‡Œ")]),t._v("\n  res"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("write")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'world'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  res"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("end")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("listen")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("8848")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("p",[t._v("ç°åœ¨æµ‹è¯•ä¸€ä¸‹ï¼Œæ€»ç®—æ˜¯å¯ä»¥äº†ï¼Œæ€»ç»“ä¸€ä¸‹å°±æ˜¯ï¼Œå¦‚æœè¯·æ±‚ä¸­å¸¦æœ‰credentialsï¼Œé‚£ä¹ˆCORSæœ‰ä¸€ä¸ªç‰¹æ®Šçš„è§„åˆ™ï¼š")]),t._v(" "),n("ol",[n("li",[t._v("å“åº”å¤´éƒ¨çš„access-control-allow-originä¸èƒ½æ˜¯*")]),t._v(" "),n("li",[t._v("å“åº”å¤´éƒ¨éœ€è¦é¢å¤–åŒ…å«"),n("code",[t._v("access-control-allow-credentials: true")])])]),t._v(" "),n("h1",{attrs:{id:"corsä¸cspçš„åŒºåˆ«"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#corsä¸cspçš„åŒºåˆ«"}},[t._v("#")]),t._v(" CORSä¸CSPçš„åŒºåˆ«")]),t._v(" "),n("p",[t._v("ä½ ä¹Ÿè®¸å¬è¯´è¿‡â€œå†…å®¹å®‰å…¨ç­–ç•¥â€ï¼Œå³ï¼šContent Security Policyï¼Œç®€ç§°CSPã€‚ä¾‹å¦‚æŸäº›ç«™ç‚¹çš„å“åº”é‡Œå¯èƒ½åŒ…å«è¿™æ ·çš„å¤´éƒ¨ï¼š")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("content-security-policy: default-src 'self'\n")])])]),n("p",[t._v("è¡¨ç¤ºå½“å‰é¡µé¢ä¸­çš„èµ„æºå¿…é¡»æ¥è‡ªç›¸åŒçš„originã€‚æœ‰å…³CSPçš„æ¦‚å¿µï¼Œè¿™é‡Œä¸åšè¯¦ç»†å±•å¼€ï¼Œå¦‚æœä½ ä¸å¤ªæ¸…æ¥šï¼Œå¯ä»¥çœ‹"),n("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP",target:"_blank",rel:"noopener noreferrer"}},[t._v("è¿™ä¸ªMDNæ–‡æ¡£"),n("OutboundLink")],1),t._v("ã€‚")]),t._v(" "),n("p",[t._v("è™½ç„¶CSPé€šå¸¸ä¹Ÿæœ‰ä¸€å®šçš„é˜»æ­¢è·¨åŸŸçš„åŠŸèƒ½ï¼Œä½†å…¶å®CSPä¾§é‡çš„æ˜¯æ§åˆ¶èµ„æºçš„æ¥æºï¼Œæ¢å¥è¯è¯´ä¹Ÿå°±æ˜¯"),n("strong",[t._v("æ§åˆ¶GETè¯·æ±‚çš„æ¥æº")]),t._v("ï¼Œè¿™ä¸»è¦æ˜¯ä¸ºäº†é˜»æ­¢å¼•å…¥æœªçŸ¥æ¥æºçš„èµ„æºï¼Œé˜²æ­¢XSSæ”»å‡»ã€‚è€Œä¸”"),n("strong",[t._v("CSPä¼šå¯¹é¡µé¢ä¸­çš„æ‰€æœ‰GETè¯·æ±‚ç”Ÿæ•ˆ")]),t._v("ï¼Œä¸è®ºæ˜¯XHRè¿˜æ˜¯aã€imgã€scriptç­‰htmlæ ‡ç­¾ã€‚è¿™ä¸¤ç‚¹æ˜¯CSPä¸CORSæœ€å¤§çš„åŒºåˆ«ã€‚")]),t._v(" "),n("p",[t._v("å¦å¤–ï¼ŒCSPå’ŒCORSäºŒè€…æ˜¯ç‹¬ç«‹çš„ï¼Œæ¯”å¦‚ä¸€ä¸ªè·¨åŸŸçš„GETè¯·æ±‚ï¼Œæ—¢è¦é€šè¿‡CSPçš„æ£€æŸ¥ï¼Œä¹Ÿè¦é€šè¿‡CORSçš„æ£€æŸ¥ã€‚")]),t._v(" "),n("h1",{attrs:{id:"å›åˆ°æœ€åˆçš„é—®é¢˜"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#å›åˆ°æœ€åˆçš„é—®é¢˜"}},[t._v("#")]),t._v(" å›åˆ°æœ€åˆçš„é—®é¢˜")]),t._v(" "),n("p",[t._v("å›åˆ°å½“åˆé‚£ä¸ªè°ƒç”¨é«˜å¾·åœ°å›¾Web APIè¯·æ±‚è·¨åŸŸçš„é—®é¢˜ï¼Œä¸€ä¸ªç®€å•çš„GETè°ƒç”¨æŠ¥è·¨åŸŸçš„èœœæ±é—®é¢˜ã€‚")]),t._v(" "),n("p",[t._v("å› ä¸ºè¿™æ˜¯ä¸ªç¬¬ä¸‰æ–¹å¼€æ”¾APIï¼Œaccess-allow-originè‚¯å®šæ˜¯*ï¼Œæ­¤æ—¶å´å‡ºç°äº†è·¨åŸŸï¼Œä¼šä¸ä¼šæ˜¯GETè¯·æ±‚å¸¦ä¸Šäº†credentialä¿¡æ¯å‘¢ï¼ˆæ¯”å¦‚cookieï¼‰ï¼Ÿ")]),t._v(" "),n("p",[t._v("ç»“æœæŠ“åŒ…å‘ç°è¯·æ±‚å¹¶æ²¡æœ‰å¸¦cookieï¼Œè¿™å°±éå¸¸è¿·æƒ‘äº†ã€‚åæ¥å›¢é˜Ÿä¸­çš„å¦ä¸€ä¸ªåŒå­¦æ³¨æ„åˆ°æŠ“åŒ…æ•è·åˆ°çš„è¯·æ±‚æ˜¯ä¸€ä¸ªOPTIONSè¯·æ±‚è€Œä¸æ˜¯GETè¯·æ±‚ã€‚è¿™è¯´æ˜è¿™ä¸ªGETè¯·æ±‚è¢«åˆ¤å®šä¸ºæ˜¯éç®€å•è¯·æ±‚ï¼Œé‚£ä¹ˆä¸€å®šæ˜¯äººå·¥è®¾ç½®äº†éç®€å•å¤´éƒ¨ã€‚ä»”ç»†æ£€æŸ¥å‘ç°ï¼Œè¯·æ±‚é‡Œç¡®å®å¤šäº†ä¸€ä¸ª"),n("code",[t._v("x-csrf-token")]),t._v("çš„å¤´éƒ¨ï¼Œç»è¿‡è°ƒæŸ¥å¾—çŸ¥æ˜¯åŸæ¥æ˜¯å› ä¸ºå‰ä¸¤å¤©å›¢é˜Ÿçš„å…¶ä»–åŒå­¦ä¿®å¤CSRFå®‰å…¨æ¼æ´ç»™xhrè¯·æ±‚éƒ½æ·»åŠ äº†è¿™ä¸ªå¤´éƒ¨ï¼Œè€ŒæŸ¥çœ‹ä»£ç å‘ç°ï¼Œè¿™ä¸ªæ³¨å…¥é€»è¾‘åªåœ¨æŸäº›é¡µé¢ç”Ÿæ•ˆï¼Œäºæ˜¯ä¸€åˆ‡éƒ½è§£é‡Šçš„é€šäº†ã€‚")]),t._v(" "),n("p",[t._v("æœ€åçš„è§£å†³åŠæ³•å°±æ˜¯ï¼Œå°†é«˜å¾·åœ°å›¾APIåŠ å…¥äº†ç™½åå•ï¼Œæ­¤æ—¶ä¸æ·»åŠ x-csrf-tokenï¼Œæœç„¶é—®é¢˜è§£å†³äº†ã€‚")]),t._v(" "),n("p",[t._v("æœ€åï¼Œæˆ‘åœ¨æµè§ˆå™¨ä¸­å°è¯•å¤ç°è¿™ä¸ªé—®é¢˜çš„æ—¶å€™å‘ç°ï¼Œå…¶å®fetchç»™å‡ºçš„æç¤ºå·²ç»å¾ˆæ¸…æ¥šäº†ï¼š")]),t._v(" "),n("p",[n("img",{attrs:{src:a(168),alt:"not allowed header"}})]),t._v(" "),n("p",[t._v("ç„¶è€Œç¢°å·§æˆ‘ä»¬çš„ä»£ç é‡Œçš„è¯·æ±‚æ˜¯ä½¿ç”¨äº†ä¸€ä¸ªå«superagentçš„åº“å‘å‡ºçš„ï¼Œå®ƒä¼šæŠŠè¿™ä¸ªé”™è¯¯æ‹¦æˆªæ‰ï¼Œç„¶åç»Ÿä¸€æŠ›å‡ºä¸€ä¸ªéå¸¸generalçš„CORSé”™è¯¯ï¼Œå®³çš„æˆ‘ä»¬è°ƒæŸ¥åŠå¤©ã€‚ã€‚")]),t._v(" "),n("h1",{attrs:{id:"å‚è€ƒèµ„æ–™"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#å‚è€ƒèµ„æ–™"}},[t._v("#")]),t._v(" å‚è€ƒèµ„æ–™")]),t._v(" "),n("ul",[n("li",[n("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS",target:"_blank",rel:"noopener noreferrer"}},[t._v("W3C: CORS"),n("OutboundLink")],1)])])])}),[],!1,null,null,null);s.default=e.exports}}]);